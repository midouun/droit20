<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© | Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        /* --- 1. Ø§Ù„ØªØµÙ…ÙŠÙ… (CSS) --- */
        :root {
            /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
            --primary-gradient: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            --accent-gradient: linear-gradient(135deg, #d4af37 0%, #f1c40f 100%);
            --bg-gradient: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            
            /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø®Ù„ÙÙŠØ§Øª */
            --bg-card: #ffffff;
            --text-main: #2c3e50;
            --text-light: #ffffff;
            --text-muted: #7f8c8d;
            
            /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø²Ø¬Ø§Ø¬ */
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: 1px solid rgba(255, 255, 255, 0.6);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.08);
            --card-radius: 24px;
            
            /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø­Ø§Ù„Ø© */
            --success: #00b894;
            --error: #e74c3c;
        }

        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
        body.dark-mode {
            --primary-gradient: linear-gradient(135deg, #243b55 0%, #141e30 100%);
            --bg-gradient: linear-gradient(135deg, #0f2027 0%, #203a43 100%);
            --bg-card: #1e2a3a;
            --text-main: #ecf0f1;
            --text-muted: #bdc3c7;
            --glass-bg: rgba(30, 42, 58, 0.7);
            --glass-border: 1px solid rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tajawal', sans-serif; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg-gradient); color: var(--text-main); height: 100vh; overflow: hidden; transition: background 0.5s ease; }

        .app-container { display: flex; height: 100%; max-width: 1920px; margin: 0 auto; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .sidebar {
            width: 280px; background: var(--primary-gradient); color: white;
            padding: 30px 20px; display: flex; flex-direction: column;
            box-shadow: 5px 0 30px rgba(0,0,0,0.15); z-index: 50; position: relative;
        }
        .logo-area { text-align: center; margin-bottom: 40px; }
        .logo-icon { font-size: 3.5rem; display: block; margin-bottom: 10px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.3)); }
        .logo-area h1 { font-size: 1.5rem; font-weight: 800; }
        
        .nav-menu { flex: 1; display: flex; flex-direction: column; gap: 12px; }
        .nav-btn {
            background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.05);
            color: rgba(255,255,255,0.8); padding: 15px 20px; border-radius: 16px;
            text-align: right; font-size: 1rem; cursor: pointer; width: 100%;
            display: flex; align-items: center; gap: 15px; transition: all 0.2s ease;
        }
        .nav-btn:hover { background: rgba(255,255,255,0.2); color: white; transform: translateX(-5px); }
        .nav-btn.active {
            background: var(--accent-gradient); color: #2c3e50; font-weight: 800;
            border: none; box-shadow: 0 5px 15px rgba(241, 196, 15, 0.3); transform: scale(1.02);
        }
        .sidebar-footer { margin-top: auto; text-align: center; }
        .theme-toggle {
            background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2);
            color: #fff; padding: 10px 20px; border-radius: 30px; cursor: pointer;
            margin: 0 auto; display: inline-flex; align-items: center; gap: 8px;
        }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-content { flex: 1; padding: 30px 40px; overflow-y: auto; scroll-behavior: smooth; }
        
        .header-box {
            background: var(--glass-bg); backdrop-filter: blur(12px); padding: 30px;
            border-radius: var(--card-radius); border: var(--glass-border); margin-bottom: 30px;
            box-shadow: var(--glass-shadow);
        }
        .header-box h2 { font-size: 2rem; font-weight: 900; margin-bottom: 10px; color: var(--text-main); }
        .header-box p { color: var(--text-muted); font-size: 1.1rem; }

        /* Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .chapters-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; }
        .chapter-card {
            background: var(--bg-card); padding: 30px; border-radius: var(--card-radius);
            box-shadow: var(--glass-shadow); cursor: pointer; transition: transform 0.3s;
            position: relative; overflow: hidden; border: 1px solid rgba(0,0,0,0.05);
        }
        .chapter-card:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
        .chapter-card::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px;
            background: var(--primary-gradient); opacity: 0; transition: 0.3s;
        }
        .chapter-card:hover::after { opacity: 1; }
        .card-icon { font-size: 3rem; margin-bottom: 20px; display: block; }
        .card-title { font-size: 1.3rem; font-weight: 800; margin-bottom: 10px; }
        .card-desc { font-size: 0.95rem; color: var(--text-muted); line-height: 1.6; }

        /* Ø§Ù„Ù‡Ø±Ù… Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ */
        .pyramid-wrapper {
            background: var(--glass-bg); padding: 40px; border-radius: var(--card-radius);
            margin-bottom: 40px; text-align: center; border: var(--glass-border);
        }
        .pyramid-container { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .pyramid-level {
            padding: 20px; color: white; font-weight: bold; cursor: pointer; font-size: 1.1rem;
            transition: 0.3s; border-radius: 12px; width: 60%; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .pyramid-level:hover { transform: scale(1.05); z-index: 10; }
        .level-3 { width: 30%; background: #e74c3c; border-radius: 20px 20px 8px 8px; }
        .level-2 { width: 50%; background: #f39c12; }
        .level-1 { width: 70%; background: #27ae60; border-radius: 8px 8px 20px 20px; }

        /* Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
        .quiz-intro, .quiz-end {
            background: var(--bg-card); padding: 60px; border-radius: 30px;
            box-shadow: var(--glass-shadow); text-align: center; max-width: 700px; margin: 0 auto;
        }
        .btn-primary {
            background: var(--accent-gradient); color: #2c3e50; border: none;
            padding: 16px 50px; border-radius: 50px; font-size: 1.2rem; font-weight: 800;
            cursor: pointer; box-shadow: 0 10px 20px rgba(241, 196, 15, 0.3); transition: 0.3s; margin-top: 20px;
        }
        .btn-primary:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(241, 196, 15, 0.4); }

        .progress-container { height: 12px; background: rgba(0,0,0,0.05); border-radius: 20px; margin-bottom: 30px; overflow: hidden; }
        .progress-bar { background: var(--accent-gradient); height: 100%; width: 0%; transition: width 0.5s ease; }
        
        .question-card { background: var(--bg-card); padding: 40px; border-radius: 25px; box-shadow: var(--glass-shadow); }
        .option-btn {
            width: 100%; background: var(--glass-bg); border: 2px solid transparent;
            padding: 18px 25px; border-radius: 15px; margin-bottom: 15px;
            font-size: 1.1rem; cursor: pointer; text-align: right; transition: 0.2s;
            color: var(--text-main); font-weight: 600; box-shadow: 0 3px 6px rgba(0,0,0,0.05);
        }
        .option-btn:hover:not(.disabled) { border-color: #3498db; background: rgba(52, 152, 219, 0.05); transform: translateX(-5px); }
        .option-btn.correct { background: rgba(46, 204, 113, 0.15); border-color: #2ecc71; color: #27ae60; }
        .option-btn.wrong { background: rgba(231, 76, 60, 0.15); border-color: #e74c3c; color: #c0392b; }
        .feedback-box { background: rgba(46, 204, 113, 0.1); border-right: 5px solid #2ecc71; padding: 25px; border-radius: 10px; margin-top: 25px; display: none; animation: slideUp 0.3s; }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ÙÙ„Ø§Ø´ÙŠØ© */
        .flashcard-wrapper { perspective: 1500px; max-width: 600px; margin: 40px auto; }
        .card { 
            height: 350px; position: relative; transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 24px; box-shadow: var(--glass-shadow); cursor: pointer;
        }
        .card.is-flipped { transform: rotateY(180deg); }
        .card__face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border-radius: 24px; background: var(--bg-card); padding: 30px; text-align: center; border: 1px solid rgba(0,0,0,0.05);
        }
        .card__face--back { background: var(--primary-gradient); color: white; transform: rotateY(180deg); }
        .fc-controls { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 30px; }
        .btn-secondary {
            background: transparent; border: 2px solid var(--text-muted); color: var(--text-main);
            padding: 10px 30px; border-radius: 30px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        .btn-secondary:hover { border-color: #3498db; color: #3498db; }

        /* Ø§Ù„Ø¨Ø­Ø« */
        .search-bar { position: relative; margin-top: 20px; }
        .search-bar input {
            width: 100%; padding: 20px 60px 20px 25px; border-radius: 50px; border: none;
            background: var(--bg-card); box-shadow: var(--glass-shadow); color: var(--text-main); font-size: 1.1rem;
        }
        .search-icon { position: absolute; right: 25px; top: 50%; transform: translateY(-50%); font-size: 1.4rem; opacity: 0.5; }

        /* Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(8px);
            display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-box {
            background: var(--bg-card); width: 90%; max-width: 800px; max-height: 85vh;
            border-radius: 30px; padding: 50px; position: relative; overflow-y: auto;
            box-shadow: 0 30px 80px rgba(0,0,0,0.4); animation: zoomIn 0.3s;
        }
        .close-btn {
            position: absolute; top: 25px; left: 25px; font-size: 2.5rem;
            background: none; border: none; color: var(--error); cursor: pointer;
        }
        .modal-header { display: flex; align-items: center; gap: 20px; margin-bottom: 30px; border-bottom: 1px solid rgba(0,0,0,0.1); padding-bottom: 20px; }
        .modal-body { line-height: 1.8; font-size: 1.1rem; }
        .modal-body h3 { color: #3498db; margin-top: 25px; margin-bottom: 10px; font-size: 1.4rem; }
        .dark-mode .modal-body h3 { color: #f1c40f; }

        /* Ø±Ø³ÙˆÙ…ÙŠØ§Øª */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        @media (max-width: 768px) {
            .app-container { flex-direction: column; }
            .sidebar { width: 100%; height: auto; flex-direction: row; align-items: center; padding: 15px; border-radius: 0 0 25px 25px; }
            .logo-area, .sidebar-footer { display: none; }
            .nav-menu { flex-direction: row; justify-content: space-between; width: 100%; }
            .nav-btn { flex-direction: column; padding: 10px; gap: 5px; font-size: 0.8rem; text-align: center; border-radius: 12px; }
            .main-content { padding: 20px; }
            .header-box { padding: 20px; }
            .header-box h2 { font-size: 1.5rem; }
            .modal-box { padding: 30px; width: 95%; }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <aside class="sidebar">
            <div class="logo-area">
                <div class="logo-icon">âš–ï¸</div>
                <h1>Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ</h1>
                <p style="opacity:0.7; font-size:0.9rem; margin-top:5px">Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø© 2025</p>
            </div>
            
            <nav class="nav-menu">
                <button class="nav-btn active" onclick="app.switchTab('review', this)">
                    <span style="font-size:1.4rem">ğŸ“š</span> Ø§Ù„Ù…ÙˆØ³ÙˆØ¹Ø©
                </button>
                <button class="nav-btn" onclick="app.switchTab('quiz', this)">
                    <span style="font-size:1.4rem">ğŸ“</span> Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                </button>
                <button class="nav-btn" onclick="app.switchTab('flashcards', this)">
                    <span style="font-size:1.4rem">ğŸ’¡</span> Ø§Ù„Ø°Ø§ÙƒØ±Ø©
                </button>
                <button class="nav-btn" onclick="app.switchTab('search', this)">
                    <span style="font-size:1.4rem">ğŸ”</span> Ø§Ù„Ø¨Ø­Ø«
                </button>
            </nav>

            <div class="sidebar-footer">
                <button class="theme-toggle" onclick="app.toggleDarkMode()">
                    <span id="theme-icon">ğŸŒ™</span> Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
                </button>
            </div>
        </aside>

        <main class="main-content">
            
            <section id="review-section" class="tab-content fade-in">
                <header class="header-box">
                    <h2>Ø§Ù„Ù…ÙˆØ³ÙˆØ¹Ø© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h2>
                    <p>Ù…Ù„Ø®ØµØ§Øª Ø§Ù„Ø¯Ø±ÙˆØ³ ÙˆØ§Ù„Ø³Ù†Ø¯Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙˆÙÙ‚ Ø¢Ø®Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø¯Ø³ØªÙˆØ±ÙŠØ©.</p>
                </header>

                <div class="pyramid-wrapper">
                    <h3 style="margin-bottom:20px; color:var(--text-main)">Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù‡Ø±Ù…ÙŠ Ù„Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ</h3>
                    <div class="pyramid-container">
                        <div class="pyramid-level level-3" onclick="app.openModal('ordinary_courts')">ğŸ›ï¸ Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ (Ù…Ø­ÙƒÙ…Ø© Ù‚Ø§Ù†ÙˆÙ†)</div>
                        <div class="pyramid-level level-2" onclick="app.openModal('ordinary_courts')">âš–ï¸ Ø§Ù„Ù…Ø¬Ø§Ù„Ø³ Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ© (Ø¯Ø±Ø¬Ø© Ø«Ø§Ù†ÙŠØ©)</div>
                        <div class="pyramid-level level-1" onclick="app.openModal('ordinary_courts')">ğŸ¢ Ø§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© (Ø¯Ø±Ø¬Ø© Ø£ÙˆÙ„Ù‰)</div>
                    </div>
                </div>

                <div class="chapters-grid" id="chapters-container">
                    </div>
            </section>

            <section id="quiz-section" class="tab-content hidden fade-in">
                <header class="header-box">
                    <h2>Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø°ÙƒÙŠ</h2>
                    <div class="stats-row" style="margin-top:15px; font-weight:bold">
                        Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© Ù…Ø³Ø¬Ù„Ø©: <span id="high-score" style="color:var(--success); font-size:1.2rem">0%</span>
                    </div>
                </header>

                <div id="quiz-start-screen" class="quiz-intro">
                    <div style="font-size:5rem; margin-bottom:20px">ğŸ“</div>
                    <h3>Ù‡Ù„ Ø£Ù†Øª Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ­Ø¯ÙŠØŸ</h3>
                    <p style="margin-bottom:30px; color:var(--text-muted); font-size:1.1rem">Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙÙŠ Ø§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ.</p>
                    <button class="btn-primary" onclick="quizManager.start()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¢Ù†</button>
                </div>

                <div id="quiz-play-area" class="hidden">
                    <div class="progress-container"><div class="progress-bar" id="quiz-progress"></div></div>
                    <div class="question-card">
                        <div style="margin-bottom:20px; display:flex; justify-content:space-between; color:var(--text-muted)">
                            <span id="q-number">Ø³Ø¤Ø§Ù„ 1</span>
                            <span style="background:rgba(212, 175, 55, 0.2); color:#d4af37; padding:4px 10px; border-radius:5px">Ù‚Ø§Ù†ÙˆÙ†</span>
                        </div>
                        <h3 id="q-text" style="font-size:1.6rem; margin-bottom:30px; line-height:1.6">Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„...</h3>
                        <div id="options-container"></div>
                    </div>
                    <div id="feedback-area" class="feedback-box">
                        <h4 id="fb-status" style="margin-bottom:10px; font-size:1.2rem"></h4>
                        <p id="fb-text" style="color:var(--text-main); font-size:1.1rem"></p>
                        <p id="fb-source" style="margin-top:15px; font-size:0.9rem; font-style:italic; opacity:0.8; background:rgba(0,0,0,0.05); display:inline-block; padding:5px 10px; border-radius:5px"></p>
                        <div style="margin-top:20px">
                            <button class="btn-primary" style="padding:10px 30px; font-size:1rem" onclick="quizManager.next()">Ø§Ù„ØªØ§Ù„ÙŠ â¬…</button>
                        </div>
                    </div>
                </div>

                <div id="quiz-results" class="quiz-end hidden">
                    <div style="font-size:5rem; margin-bottom:20px">ğŸ†</div>
                    <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
                    <div style="font-size:4rem; color:var(--success); margin:20px 0; font-weight:900"><span id="final-score">0</span>%</div>
                    <p id="result-msg" style="margin-bottom:30px; font-size:1.2rem"></p>
                    <button class="btn-primary" onclick="quizManager.reset()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
                </div>
            </section>

            <section id="flashcards-section" class="tab-content hidden fade-in">
                <header class="header-box">
                    <h2>Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Flashcards)</h2>
                    <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù„Ù‚Ù„Ø¨Ù‡Ø§ ÙˆÙ…Ø¹Ø±ÙØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©. Ù…Ù…ØªØ§Ø²Ø© Ù„Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø±ÙŠØ¹.</p>
                </header>
                <div class="flashcard-wrapper">
                    <div class="card" onclick="flashcardManager.flip()">
                        <div class="card__face card__face--front">
                            <span style="font-size:4rem; margin-bottom:20px; opacity:0.8">â“</span>
                            <h3 id="fc-front" style="font-size:1.6rem; line-height:1.5">Ø§Ù„Ø³Ø¤Ø§Ù„</h3>
                            <p style="margin-top:20px; font-size:0.9rem; color:var(--text-muted)">Ø§Ø¶ØºØ· Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©</p>
                        </div>
                        <div class="card__face card__face--back">
                            <span style="font-size:3rem; margin-bottom:15px">ğŸ’¡</span>
                            <h3 id="fc-back" style="font-size:1.5rem; margin-bottom:20px; line-height:1.5">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</h3>
                            <p id="fc-source" style="background:rgba(255,255,255,0.2); padding:5px 15px; border-radius:15px; font-size:0.9rem">Ø§Ù„Ù…ØµØ¯Ø±</p>
                        </div>
                    </div>
                    <div class="fc-controls">
                        <button class="btn-secondary" onclick="flashcardManager.prev()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                        <span id="fc-counter" style="font-weight:bold; font-size:1.2rem; min-width:80px; text-align:center">1 / 10</span>
                        <button class="btn-secondary" onclick="flashcardManager.next()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                    </div>
                </div>
            </section>

            <section id="search-section" class="tab-content hidden fade-in">
                <header class="header-box">
                    <h2>Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h2>
                    <div class="search-bar">
                        <input type="text" id="search-input" placeholder="Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ù„Ù„Ø¨Ø­Ø« (Ù…Ø«Ù„Ø§Ù‹: Ù…Ø­ÙƒÙ…Ø©ØŒ Ù‚Ø§Ø¶ÙŠØŒ Ù…Ø§Ø¯Ø© 152...)" onkeyup="app.search()">
                        <span class="search-icon">ğŸ”</span>
                    </div>
                </header>
                <div id="search-results" class="chapters-grid"></div>
            </section>

        </main>
    </div>

    <div id="modal" class="modal-overlay">
        <div class="modal-box">
            <button class="close-btn" onclick="app.closeModal()">Ã—</button>
            <div class="modal-header">
                <span id="modal-icon" style="font-size:2.5rem">ğŸ“„</span>
                <h2 id="modal-title">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</h2>
            </div>
            <div id="modal-content" class="modal-body">
                </div>
        </div>
    </div>

    <script>
        // --- 2. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© (Full Database) ---
        const db = {
            review: [
                {
                    id: "principles",
                    title: "Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ",
                    icon: "âš–ï¸",
                    desc: "Ø§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙŠ ÙŠÙ‚ÙˆÙ… Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ.",
                    content: `
                        <h3>1. Ù…Ø¨Ø¯Ø£ Ø§Ø³ØªÙ‚Ù„Ø§Ù„ÙŠØ© Ø§Ù„Ù‚Ø¶Ø§Ø¡</h3>
                        <p>ÙƒØ±Ø³Ù‡ Ø§Ù„Ù…Ø¤Ø³Ø³ Ø§Ù„Ø¯Ø³ØªÙˆØ±ÙŠ ÙÙŠ Ø§Ù„Ù…Ø§Ø¯Ø© 163ØŒ Ø­ÙŠØ« Ù„Ø§ ÙŠØ®Ø¶Ø¹ Ø§Ù„Ù‚Ø§Ø¶ÙŠ Ø¥Ù„Ø§ Ù„Ù„Ù‚Ø§Ù†ÙˆÙ†. ÙˆÙŠØ­Ù…ÙŠÙ‡ Ø§Ù„Ù…Ø¬Ù„Ø³ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ù‚Ø¶Ø§Ø¡ Ù…Ù† Ø£ÙŠ Ø¶ØºÙˆØ·Ø§Øª.</p>
                        <h3>2. Ù…Ø¨Ø¯Ø£ Ø§Ù„ØªÙ‚Ø§Ø¶ÙŠ Ø¹Ù„Ù‰ Ø¯Ø±Ø¬ØªÙŠÙ†</h3>
                        <p>ÙŠØ¹Ù†ÙŠ Ø¥ØªØ§Ø­Ø© Ø§Ù„ÙØ±ØµØ© Ù„Ù„Ù…ØªÙ‚Ø§Ø¶ÙŠ Ù„Ø·Ø±Ø­ Ù†Ø²Ø§Ø¹Ù‡ Ø£Ù…Ø§Ù… Ù…Ø­ÙƒÙ…Ø© Ø£Ø¹Ù„Ù‰ (Ù…Ø¬Ù„Ø³ Ù‚Ø¶Ø§Ø¦ÙŠ Ø£Ùˆ Ù…Ø­ÙƒÙ…Ø© Ø¥Ø¯Ø§Ø±ÙŠØ© Ù„Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù) Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© (Ø§Ù„Ù…Ø§Ø¯Ø© 169 Ø¯Ø³ØªÙˆØ±).</p>
                        <h3>3. Ù…Ø¨Ø¯Ø£ Ø¹Ù„Ø§Ù†ÙŠØ© Ø§Ù„Ø¬Ù„Ø³Ø§Øª</h3>
                        <p>Ø§Ù„Ø£ØµÙ„ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ù…ÙØªÙˆØ­Ø© Ù„Ù„Ø¬Ù…Ù‡ÙˆØ± Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø±Ù‚Ø§Ø¨Ø© Ø§Ù„Ø´Ø¹Ø¨ÙŠØ©ØŒ ÙˆØ§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ù‡Ùˆ "Ø§Ù„Ø³Ø±ÙŠØ©" ÙÙŠ Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ÙˆØ´Ø¤ÙˆÙ† Ø§Ù„Ø£Ø³Ø±Ø© Ø£Ùˆ Ù…Ø§ ÙŠÙ…Ø³ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù….</p>
                        <h3>4. Ù…Ø¬Ø§Ù†ÙŠØ© Ø§Ù„Ù‚Ø¶Ø§Ø¡</h3>
                        <p>Ù„Ø§ ÙŠØ¹Ù†ÙŠ Ø¹Ø¯Ù… Ø¯ÙØ¹ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©ØŒ Ø¨Ù„ ÙŠØ¹Ù†ÙŠ Ø£Ù† Ø§Ù„Ù‚Ø¶Ø§Ø© ÙŠØªÙ‚Ø§Ø¶ÙˆÙ† Ø±ÙˆØ§ØªØ¨Ù‡Ù… Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„Ø© ÙˆÙ„ÙŠØ³ Ù…Ù† Ø§Ù„Ù…ØªÙ‚Ø§Ø¶ÙŠÙ†ØŒ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø­ÙŠØ§Ø¯.</p>
                    `
                },
                {
                    id: "ordinary_courts",
                    title: "Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø§Ù„Ø¹Ø§Ø¯ÙŠ",
                    icon: "ğŸ›ï¸",
                    desc: "Ø§Ù„Ù…Ø­Ø§ÙƒÙ…ØŒ Ø§Ù„Ù…Ø¬Ø§Ù„Ø³ Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©ØŒ ÙˆØ§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§.",
                    content: `
                        <h3>1. Ø§Ù„Ù…Ø­ÙƒÙ…Ø© (Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰)</h3>
                        <p>Ù‡ÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŒ ÙˆØªÙˆØ¬Ø¯ Ù…Ø­ÙƒÙ…Ø© ÙÙŠ ÙƒÙ„ Ø¯Ø§Ø¦Ø±Ø© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹. ØªØªÙƒÙˆÙ† Ù…Ù† Ø£Ù‚Ø³Ø§Ù… (Ø§Ù„Ù…Ø¯Ù†ÙŠØŒ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠØŒ Ø´Ø¤ÙˆÙ† Ø§Ù„Ø£Ø³Ø±Ø©ØŒ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØŒ Ø§Ù„Ø¬Ù†Ø­...). Ø§Ù„Ø£ØµÙ„ ÙÙŠÙ‡Ø§ Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø§Ù„ÙØ±Ø¯ÙŠ Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ÙˆØ§Ù„ØªØ¬Ø§Ø±ÙŠØ© ÙˆØ§Ù„Ø£Ø­Ø¯Ø§Ø«.</p>
                        <h3>2. Ø§Ù„Ù…Ø¬Ù„Ø³ Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ (Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©)</h3>
                        <p>ÙŠÙˆØ¬Ø¯ Ù…Ø¬Ù„Ø³ Ù‚Ø¶Ø§Ø¦ÙŠ ÙÙŠ ÙƒÙ„ ÙˆÙ„Ø§ÙŠØ©. ÙŠØ®ØªØµ Ø¨Ù†Ø¸Ø± Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„ØµØ§Ø¯Ø±Ø© Ø¹Ù† Ø§Ù„Ù…Ø­Ø§ÙƒÙ…. Ø§Ù„Ø¹Ù…Ù„ ÙÙŠÙ‡ Ø¬Ù…Ø§Ø¹ÙŠ Ø¯Ø§Ø¦Ù…Ø§Ù‹ (3 Ù‚Ø¶Ø§Ø©). ÙŠØ¶Ù… ØºØ±ÙØ§Ù‹ (Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©ØŒ Ø§Ù„Ø¬Ø²Ø§Ø¦ÙŠØ©ØŒ ØºØ±ÙØ© Ø§Ù„Ø§ØªÙ‡Ø§Ù…...).</p>
                        <h3>3. Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ (Ù‚Ù…Ø© Ø§Ù„Ù‡Ø±Ù…)</h3>
                        <p>Ù…Ù‚Ø±Ù‡Ø§ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø§Ù„Ø¹Ø§ØµÙ…Ø©. Ù„ÙŠØ³Øª Ø¯Ø±Ø¬Ø© Ø«Ø§Ù„Ø«Ø© Ù„Ù„ØªÙ‚Ø§Ø¶ÙŠØŒ Ø¨Ù„ Ù‡ÙŠ "Ù…Ø­ÙƒÙ…Ø© Ù‚Ø§Ù†ÙˆÙ†" ØªØ±Ø§Ù‚Ø¨ Ù…Ø¯Ù‰ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ù…Ù† Ù‚Ø¨Ù„ Ù‚Ø¶Ø§Ø© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ (Ø§Ù„Ù…Ø¬Ø§Ù„Ø³ ÙˆØ§Ù„Ù…Ø­Ø§ÙƒÙ…). ØªØªÙƒÙˆÙ† Ù…Ù† 7 ØºØ±Ù.</p>
                    `
                },
                {
                    id: "admin_justice",
                    title: "Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ",
                    icon: "ğŸ“œ",
                    desc: "Ø§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© ÙˆÙ…Ø¬Ù„Ø³ Ø§Ù„Ø¯ÙˆÙ„Ø©.",
                    content: `
                        <h3>1. Ø§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</h3>
                        <p>ØªØ®ØªØµ Ø¨Ø§Ù„ÙØµÙ„ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø²Ø¹Ø§Øª Ø§Ù„ØªÙŠ ØªÙƒÙˆÙ† Ø§Ù„Ø¯ÙˆÙ„Ø© Ø£Ùˆ Ø§Ù„ÙˆÙ„Ø§ÙŠØ© Ø£Ùˆ Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© Ø·Ø±ÙØ§Ù‹ ÙÙŠÙ‡Ø§.</p>
                        <h3>2. Ø§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© Ù„Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù</h3>
                        <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ Ù„ØªÙƒØ±ÙŠØ³ Ù…Ø¨Ø¯Ø£ Ø§Ù„ØªÙ‚Ø§Ø¶ÙŠ Ø¹Ù„Ù‰ Ø¯Ø±Ø¬ØªÙŠÙ† ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©ØŒ ÙˆØªÙ†Ø¸Ø± ÙÙŠ Ø§Ø³ØªØ¦Ù†Ø§Ù Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©.</p>
                        <h3>3. Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¯ÙˆÙ„Ø©</h3>
                        <p>Ù‡Ùˆ Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„Ù…Ù‚ÙˆÙ…Ø© Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©ØŒ ÙˆÙ„Ù‡ Ø¯ÙˆØ± Ø§Ø³ØªØ´Ø§Ø±ÙŠ Ù„Ù„Ø­ÙƒÙˆÙ…Ø©.</p>
                    `
                },
                {
                    id: "conflict_court",
                    title: "Ù…Ø­ÙƒÙ…Ø© Ø§Ù„ØªÙ†Ø§Ø²Ø¹",
                    icon: "âš¡",
                    desc: "Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„ÙØ§ØµÙ„Ø© ÙÙŠ ØªÙ†Ø§Ø²Ø¹ Ø§Ù„Ø§Ø®ØªØµØ§Øµ.",
                    content: `
                        <h3>Ø§Ù„ØªØ´ÙƒÙŠÙ„</h3>
                        <p>ØªØªÙƒÙˆÙ† Ù…Ù†Ø§ØµÙØ© Ù…Ù† Ù‚Ø¶Ø§Ø© Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ ÙˆÙ‚Ø¶Ø§Ø© Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¯ÙˆÙ„Ø© (7 Ø£Ø¹Ø¶Ø§Ø¡ Ø¨Ø±Ø¦Ø§Ø³Ø© Ø¯ÙˆØ±ÙŠØ©). ØªØ³ØªÙ†Ø¯ Ù„Ù„Ù…Ø§Ø¯Ø© 152 Ù…Ù† Ø§Ù„Ø¯Ø³ØªÙˆØ±.</p>
                        <h3>Ø§Ù„Ù…Ù‡Ø§Ù…</h3>
                        <p>ØªÙØµÙ„ ÙÙŠ "ØªÙ†Ø§Ø²Ø¹ Ø§Ù„Ø§Ø®ØªØµØ§Øµ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ" Ùˆ"Ø§Ù„ØªÙ†Ø§Ø²Ø¹ Ø§Ù„Ø³Ù„Ø¨ÙŠ" Ø¨ÙŠÙ† Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø§Ù„Ø¹Ø§Ø¯ÙŠ ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±ÙŠ.</p>
                    `
                },
                {
                    id: "auxiliaries",
                    title: "Ù…Ø³Ø§Ø¹Ø¯Ùˆ Ø§Ù„Ù‚Ø¶Ø§Ø¡",
                    icon: "ğŸ‘¥",
                    desc: "Ø§Ù„Ù…Ø­Ø§Ù…ÙŠØŒ Ø§Ù„Ù…ÙˆØ«Ù‚ØŒ ÙˆØ§Ù„Ù…Ø­Ø¶Ø± Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ.",
                    content: `
                        <ul>
                            <li><strong>Ø§Ù„Ù…Ø­Ø§Ù…ÙŠ:</strong> ÙŠØ¯Ø§ÙØ¹ Ø¹Ù† Ø§Ù„Ù…ØªÙ‚Ø§Ø¶ÙŠÙ† ÙˆÙŠÙ…Ø«Ù„Ù‡Ù…. Ù…Ù‡Ù†Ø© Ø­Ø±Ø© ÙˆÙ…Ø³ØªÙ‚Ù„Ø©.</li>
                            <li><strong>Ø§Ù„Ù…ÙˆØ«Ù‚:</strong> Ø¶Ø§Ø¨Ø· Ø¹Ù…ÙˆÙ…ÙŠ ÙŠØªÙˆÙ„Ù‰ ØªØ­Ø±ÙŠØ± Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ø±Ø³Ù…ÙŠØ©.</li>
                            <li><strong>Ø§Ù„Ù…Ø­Ø¶Ø± Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ:</strong> ÙŠØªÙˆÙ„Ù‰ ØªØ¨Ù„ÙŠØº Ø§Ù„Ø¹Ø±Ø§Ø¦Ø¶ ÙˆØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©.</li>
                        </ul>
                    `
                },
                {
                    id: "new_developments",
                    title: "Ø§Ù„Ù…Ø³ØªØ¬Ø¯Ø§Øª ÙˆØ§Ù„Ø±Ù‚Ù…Ù†Ø©",
                    icon: "ğŸ’»",
                    desc: "Ø§Ù„Ø¹ØµØ±Ù†Ø© ÙˆØ§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©.",
                    content: `
                        <h3>Ø§Ù„ØªÙ‚Ø§Ø¶ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h3>
                        <p>Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ø¹Ø±Ø§Ø¦Ø¶ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Ù‹ØŒ ÙˆØ¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙƒÙ…Ø§Øª Ø¹Ù† Ø¨Ø¹Ø¯.</p>
                        <h3>Ø§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ø§Ù„Ù…ØªØ®ØµØµØ©</h3>
                        <p>Ø£Ù†Ø´Ø¦Øª Ø¨Ù…ÙˆØ¬Ø¨ Ù‚Ø§Ù†ÙˆÙ† 22-13 Ù„Ù„Ù†Ø¸Ø± ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø²Ø¹Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ø§Ù„ÙƒØ¨Ø±Ù‰ØŒ ÙˆØªØ¶Ù… Ù…Ø³Ø§Ø¹Ø¯ÙŠÙ† ØªØ¬Ø§Ø±ÙŠÙŠÙ†.</p>
                    `
                }
            ],
            questions: [
                {
                    q: "Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ ØªØ¹ØªØ¨Ø±:",
                    options: ["Ø¯Ø±Ø¬Ø© Ø«Ø§Ù„Ø«Ø© Ù„Ù„ØªÙ‚Ø§Ø¶ÙŠ", "Ù…Ø­ÙƒÙ…Ø© Ù…ÙˆØ¶ÙˆØ¹", "Ù…Ø­ÙƒÙ…Ø© Ù‚Ø§Ù†ÙˆÙ† (Ù…Ù‚ÙˆÙ…Ø©)", "Ù…Ø­ÙƒÙ…Ø© Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©"],
                    correct: 2,
                    explanation: "Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ø§ ØªØ¹ÙŠØ¯ Ø§Ù„Ù†Ø¸Ø± ÙÙŠ Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ØŒ Ø¨Ù„ ØªØ±Ø§Ù‚Ø¨ ØµØ­Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† ÙÙ‚Ø·.",
                    citation: "Ø§Ù„Ù…Ø§Ø¯Ø© 152 Ù…Ù† Ø§Ù„Ø¯Ø³ØªÙˆØ±"
                },
                {
                    q: "ÙŠÙØµÙ„ ÙÙŠ ØªÙ†Ø§Ø²Ø¹ Ø§Ù„Ø§Ø®ØªØµØ§Øµ Ø¨ÙŠÙ† Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø§Ù„Ø¹Ø§Ø¯ÙŠ ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±ÙŠ:",
                    options: ["Ø§Ù„Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¯Ø³ØªÙˆØ±ÙŠ", "Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¯ÙˆÙ„Ø©", "Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§", "Ù…Ø­ÙƒÙ…Ø© Ø§Ù„ØªÙ†Ø§Ø²Ø¹"],
                    correct: 3,
                    explanation: "Ù…Ø­ÙƒÙ…Ø© Ø§Ù„ØªÙ†Ø§Ø²Ø¹ Ù‡ÙŠ Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„ÙˆØ­ÙŠØ¯Ø© Ø§Ù„Ù…Ø®ØªØµØ© Ø¯Ø³ØªÙˆØ±ÙŠØ§Ù‹ Ø¨Ø§Ù„ÙØµÙ„ ÙÙŠ Ø§Ù„Ù†Ø²Ø§Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠÙ†.",
                    citation: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¹Ø¶ÙˆÙŠ Ø±Ù‚Ù… 98-03"
                },
                {
                    q: "Ø§Ù„Ø£ØµÙ„ ÙÙŠ ØªØ´ÙƒÙŠÙ„Ø© Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©:",
                    options: ["Ù‚Ø§Ø¶Ù ÙØ±Ø¯", "Ø«Ù„Ø§Ø«Ø© Ù‚Ø¶Ø§Ø©", "Ø®Ù…Ø³Ø© Ù‚Ø¶Ø§Ø©", "Ù‚Ø§Ø¶ÙŠØ§Ù† ÙˆÙ…Ø³Ø§Ø¹Ø¯"],
                    correct: 0,
                    explanation: "Ø§Ù„Ø£ØµÙ„ Ù‡Ùˆ Ø§Ù„Ù‚Ø§Ø¶ÙŠ Ø§Ù„ÙØ±Ø¯ Ù„ØªØ¨Ø³ÙŠØ· Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§ØªØŒ Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ÙˆØ§Ù„ØªØ¬Ø§Ø±ÙŠØ©.",
                    citation: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø¯Ù†ÙŠØ© ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©"
                },
                {
                    q: "Ù…Ø¯Ø© Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¯Ù†ÙŠØ© Ù‡ÙŠ:",
                    options: ["10 Ø£ÙŠØ§Ù…", "Ø´Ù‡Ø± ÙˆØ§Ø­Ø¯", "Ø´Ù‡Ø±Ø§Ù†", "15 ÙŠÙˆÙ…Ø§Ù‹"],
                    correct: 1,
                    explanation: "ÙŠØ­Ø¯Ø¯ Ù…ÙŠØ¹Ø§Ø¯ Ø§Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù Ø¨Ø´Ù‡Ø± ÙˆØ§Ø­Ø¯ Ù…Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¨Ù„ÙŠØº Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„Ø­ÙƒÙ….",
                    citation: "Ø§Ù„Ù…Ø§Ø¯Ø© 336 Ù‚.Ø¥.Ù….Ø¥"
                },
                {
                    q: "ØªØ®ØªØµ Ø§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ø§Ù„Ù…ØªØ®ØµØµØ© ÙÙŠ:",
                    options: ["Ø§Ù„Ø¬Ù†Ø­ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©", "Ø§Ù„Ø·Ù„Ø§Ù‚", "Ù…Ù†Ø§Ø²Ø¹Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ø¥ÙÙ„Ø§Ø³", "Ø§Ù„Ø¹Ù‚Ø§Ø±"],
                    correct: 2,
                    explanation: "Ø£Ù†Ø´Ø¦Øª Ù„Ù„Ù…Ù†Ø§Ø²Ø¹Ø§Øª Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© ÙˆÙ…Ù†Ø§Ø²Ø¹Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©.",
                    citation: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† 22-13"
                },
                {
                    q: "Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ø®ØªØµØ© Ø¨Ù…Ø­Ø§ÙƒÙ…Ø© Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø¹Ù† Ø§Ù„Ø®ÙŠØ§Ù†Ø© Ø§Ù„Ø¹Ø¸Ù…Ù‰:",
                    options: ["Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§", "Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¯Ø³ØªÙˆØ±ÙŠØ©", "Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„Ø¯ÙˆÙ„Ø©", "Ù…Ø¬Ù„Ø³ Ø§Ù„Ø£Ù…Ø©"],
                    correct: 2,
                    explanation: "ØªØ®ØªØµ Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„Ø¯ÙˆÙ„Ø© Ø¨Ù…Ø­Ø§ÙƒÙ…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ ÙÙŠ Ø­Ø§Ù„Ø§Øª Ù…Ø­Ø¯Ø¯Ø© Ø¯Ø³ØªÙˆØ±ÙŠØ§Ù‹.",
                    citation: "Ø§Ù„Ù…Ø§Ø¯Ø© 183 Ù…Ù† Ø§Ù„Ø¯Ø³ØªÙˆØ±"
                },
                {
                    q: "Ù…Ù† ÙŠÙ‚ÙˆÙ… Ø¨ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©ØŸ",
                    options: ["ÙƒØ§ØªØ¨ Ø§Ù„Ø¶Ø¨Ø·", "Ø§Ù„Ù…Ø­Ø¶Ø± Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ", "Ø§Ù„Ù…ÙˆØ«Ù‚", "Ø§Ù„Ø®Ø¨ÙŠØ±"],
                    correct: 1,
                    explanation: "Ø§Ù„Ù…Ø­Ø¶Ø± Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ Ù‡Ùˆ Ø§Ù„Ø¶Ø§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠ Ø§Ù„Ù…ÙÙˆØ¶ Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„Ø© Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ø­ÙƒØ§Ù….",
                    citation: "Ù‚Ø§Ù†ÙˆÙ† ØªÙ†Ø¸ÙŠÙ… Ù…Ù‡Ù†Ø© Ø§Ù„Ù…Ø­Ø¶Ø± Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ"
                }
            ],
            flashcards: [
                { q: "Ø¹Ø¯Ø¯ Ø£Ø¹Ø¶Ø§Ø¡ Ù…Ø­ÙƒÙ…Ø© Ø§Ù„ØªÙ†Ø§Ø²Ø¹", a: "7 Ø£Ø¹Ø¶Ø§Ø¡ (3 Ø¹Ù„ÙŠØ§ + 3 Ù…Ø¬Ù„Ø³ Ø¯ÙˆÙ„Ø© + Ø§Ù„Ø±Ø¦ÙŠØ³)", cite: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¹Ø¶ÙˆÙŠ 98-03" },
                { q: "Ø³Ù† Ø§Ù„Ù‚Ø¨ÙˆÙ„ ÙÙŠ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ù‚Ø¶Ø§Ø¡", a: "Ø¨ÙŠÙ† 27 Ùˆ 40 Ø³Ù†Ø©", cite: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ù‚Ø¶Ø§Ø¡" },
                { q: "Ø§Ù„ØºØ±Ù Ø§Ù„Ù…Ø¬ØªÙ…Ø¹Ø©", a: "Ø§Ø¬ØªÙ…Ø§Ø¹ Ø¬Ù…ÙŠØ¹ ØºØ±Ù Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø§Ø¬ØªÙ‡Ø§Ø¯", cite: "Ø§Ù„Ù…Ø§Ø¯Ø© 18 Ù‚.Ø¹ Ù„Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù„ÙŠØ§" },
                { q: "Ø§Ù„Ù†ÙŠØ§Ø¨Ø© Ø§Ù„Ø¹Ø§Ù…Ø©", a: "ØªÙ…Ø«Ù„ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙˆØªØ·Ø§Ù„Ø¨ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† ÙÙŠ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ø¬Ø²Ø§Ø¦ÙŠØ©", cite: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¬Ø²Ø§Ø¦ÙŠØ©" },
                { q: "Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©", a: "ØªØªØ¨Ø¹ ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø¯ÙØ§Ø¹ ÙˆØªØ®ØªØµ Ø¨Ø§Ù„Ø¬Ø±Ø§Ø¦Ù… Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©", cite: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ù‚Ø¶Ø§Ø¡ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ" },
                { q: "Ø­Ù‚ Ø§Ù„Ø¯ÙØ§Ø¹", a: "Ø­Ù‚ Ø¯Ø³ØªÙˆØ±ÙŠ Ù…ÙƒÙÙˆÙ„ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ­Ù‚ÙŠÙ‚ ÙˆØ§Ù„Ù…Ø­Ø§ÙƒÙ…Ø©", cite: "Ø§Ù„Ù…Ø§Ø¯Ø© 169 Ø¯Ø³ØªÙˆØ±" },
                { q: "Ø§Ù„ØµÙ„Ø­ Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ", a: "Ø¥Ø¬Ø±Ø§Ø¡ ÙˆØ¬ÙˆØ¨ÙŠ ÙÙŠ Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ø·Ù„Ø§Ù‚ ÙˆØ´Ø¤ÙˆÙ† Ø§Ù„Ø£Ø³Ø±Ø©", cite: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø£Ø³Ø±Ø©" },
                { q: "Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¯ÙˆÙ„Ø©", a: "Ø¬Ù‡Ø© Ø§Ø³ØªØ¦Ù†Ø§Ù ÙˆÙ†Ù‚Ø¶ ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©ØŒ ÙˆØ¬Ù‡Ø© Ø§Ø³ØªØ´Ø§Ø±ÙŠØ© Ù„Ù„Ø­ÙƒÙˆÙ…Ø©", cite: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¹Ø¶ÙˆÙŠ 98-01" }
            ]
        };

        // --- 3. Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ (App Logic) ---
        const app = {
            init: function() {
                console.log("App Started Successfully");
                this.loadTheme();
                this.renderReviews();
                quizManager.loadHistory();
                flashcardManager.init();
            },

            switchTab: function(tabId, btnElement) {
                // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
                document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                const target = document.getElementById(tabId + '-section');
                if(target) target.classList.remove('hidden');
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                if(btnElement) btnElement.classList.add('active');
            },

            toggleDarkMode: function() {
                document.body.classList.toggle('dark-mode');
                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            },

            loadTheme: function() {
                if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
            },

            renderReviews: function() {
                const container = document.getElementById('chapters-container');
                if(!container) return;
                container.innerHTML = db.review.map(item => `
                    <div class="chapter-card" onclick="app.openModal('${item.id}')">
                        <span class="card-icon">${item.icon}</span>
                        <div class="card-title">${item.title}</div>
                        <div class="card-desc">${item.desc}</div>
                    </div>
                `).join('');
            },

            openModal: function(id) {
                const item = db.review.find(i => i.id === id);
                if (!item) return;
                document.getElementById('modal-title').innerText = item.title;
                document.getElementById('modal-icon').innerText = item.icon;
                document.getElementById('modal-content').innerHTML = item.content;
                document.getElementById('modal').style.display = 'flex';
            },

            closeModal: function() {
                document.getElementById('modal').style.display = 'none';
            },

            search: function() {
                const query = document.getElementById('search-input').value.toLowerCase();
                const resultsDiv = document.getElementById('search-results');
                resultsDiv.innerHTML = '';
                
                if (query.length < 2) return;

                db.review.forEach(item => {
                    if (item.content.includes(query) || item.title.includes(query)) {
                        resultsDiv.innerHTML += `
                            <div class="chapter-card" onclick="app.openModal('${item.id}')">
                                <span class="card-icon">ğŸ“„</span><div class="card-title">${item.title}</div>
                                <div class="card-desc">Ù†ØªÙŠØ¬Ø© Ø¨Ø­Ø«</div>
                            </div>`;
                    }
                });
            }
        };

        const quizManager = {
            questions: [], index: 0, score: 0,

            loadHistory: function() {
                const h = JSON.parse(localStorage.getItem('quizScore'));
                if(h) document.getElementById('high-score').innerText = h + '%';
            },

            start: function() {
                this.questions = [...db.questions].sort(() => 0.5 - Math.random());
                this.index = 0; this.score = 0;
                document.getElementById('quiz-start-screen').classList.add('hidden');
                document.getElementById('quiz-play-area').classList.remove('hidden');
                document.getElementById('quiz-results').classList.add('hidden');
                this.showQuestion();
            },

            showQuestion: function() {
                const q = this.questions[this.index];
                document.getElementById('feedback-area').style.display = 'none';
                document.getElementById('q-number').innerText = `Ø³Ø¤Ø§Ù„ ${this.index + 1} Ù…Ù† ${this.questions.length}`;
                document.getElementById('q-text').innerText = q.q;
                document.getElementById('quiz-progress').style.width = ((this.index) / this.questions.length * 100) + '%';
                
                const cont = document.getElementById('options-container');
                cont.innerHTML = '';
                q.options.forEach((opt, idx) => {
                    const btn = document.createElement('div');
                    btn.className = 'option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => this.check(idx, btn);
                    cont.appendChild(btn);
                });
            },

            check: function(idx, btn) {
                if(btn.classList.contains('disabled')) return;
                const q = this.questions[this.index];
                document.querySelectorAll('.option-btn').forEach(b => b.classList.add('disabled'));
                
                const fb = document.getElementById('feedback-area');
                const st = document.getElementById('fb-status');
                
                if(idx === q.correct) {
                    this.score++;
                    btn.classList.add('correct');
                    st.innerText = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! âœ…";
                    st.style.color = "var(--success)";
                } else {
                    btn.classList.add('wrong');
                    document.querySelectorAll('.option-btn')[q.correct].classList.add('correct');
                    st.innerText = "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© âŒ";
                    st.style.color = "var(--error)";
                }
                
                document.getElementById('fb-text').innerText = q.explanation;
                document.getElementById('fb-source').innerText = "Ø§Ù„Ø³Ù†Ø¯: " + q.citation;
                fb.style.display = 'block';
            },

            next: function() {
                this.index++;
                if(this.index < this.questions.length) this.showQuestion();
                else this.finish();
            },

            finish: function() {
                document.getElementById('quiz-play-area').classList.add('hidden');
                document.getElementById('quiz-results').classList.remove('hidden');
                const final = Math.round((this.score / this.questions.length) * 100);
                document.getElementById('final-score').innerText = final;
                
                let msg = "";
                if(final === 100) msg = "Ù…Ø°Ù‡Ù„! Ø£Ù†Øª Ø®Ø¨ÙŠØ± Ù‚Ø¶Ø§Ø¦ÙŠ ğŸ¥‡";
                else if(final >= 70) msg = "Ù…Ù…ØªØ§Ø²! Ø§Ø³ØªÙ…Ø± Ù‡ÙƒØ°Ø§ ğŸ¥ˆ";
                else msg = "ØªØ­ØªØ§Ø¬ Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ ğŸ“š";
                
                document.getElementById('result-msg').innerText = msg;
                localStorage.setItem('quizScore', final);
            },
            
            reset: function() { this.start(); }
        };

        const flashcardManager = {
            index: 0,
            init: function() { this.render(); },
            render: function() {
                const item = db.flashcards[this.index];
                document.getElementById('fc-front').innerText = item.q;
                document.getElementById('fc-back').innerText = item.a;
                document.getElementById('fc-source').innerText = item.cite;
                document.getElementById('fc-counter').innerText = `${this.index + 1} / ${db.flashcards.length}`;
                document.querySelector('.card').classList.remove('is-flipped');
            },
            flip: function() { document.querySelector('.card').classList.toggle('is-flipped'); },
            next: function() { this.index = (this.index + 1) % db.flashcards.length; this.render(); },
            prev: function() { this.index = (this.index - 1 + db.flashcards.length) % db.flashcards.length; this.render(); }
        };

        // Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        window.onload = function() { app.init(); };
    </script>
</body>
</html>
