<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูููุตุฉ ุงููุถุงุฆูุฉ ุงูุฌุฒุงุฆุฑูุฉ | ุงูุฅุตุฏุงุฑ ุงูุดุงูู</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #1a2a6c 0%, #b21f1f 100%, #fdbb2d 100%); /* ููุณุฉ ุงูุนูู ุงูุฌุฒุงุฆุฑู ุจุฃุณููุจ ุนุตุฑู */
            --blue-gradient: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            --gold-gradient: linear-gradient(135deg, #d4af37 0%, #f1c40f 100%);
            --bg-main: #f4f7f6;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --text-light: #7f8c8d;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
            --radius: 20px;
        }

        body.dark-mode {
            --bg-main: #0f2027;
            --card-bg: #203a43;
            --text-main: #ecf0f1;
            --text-light: #bdc3c7;
            --shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tajawal', sans-serif; outline: none; }
        body { background: var(--bg-main); color: var(--text-main); height: 100vh; overflow: hidden; transition: 0.3s; }

        .app-container { display: flex; height: 100%; }
        
        /* Sidebar */
        .sidebar { width: 280px; background: var(--blue-gradient); color: white; padding: 30px 20px; display: flex; flex-direction: column; box-shadow: 5px 0 20px rgba(0,0,0,0.1); z-index: 10; }
        .logo-area { text-align: center; margin-bottom: 40px; }
        .logo-icon { font-size: 3.5rem; margin-bottom: 10px; display: block; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.2)); }
        .nav-btn { background: rgba(255,255,255,0.1); border: none; color: white; padding: 15px; border-radius: 15px; margin-bottom: 10px; width: 100%; text-align: right; cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 15px; font-size: 1rem; }
        .nav-btn:hover, .nav-btn.active { background: var(--gold-gradient); color: #2c3e50; font-weight: bold; transform: translateX(-5px); box-shadow: 0 5px 15px rgba(241, 196, 15, 0.3); }
        .theme-toggle { margin-top: auto; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 20px; cursor: pointer; text-align: center; }

        /* Main Content */
        .main-content { flex: 1; padding: 30px 40px; overflow-y: auto; scroll-behavior: smooth; }
        .header-box { background: var(--card-bg); padding: 30px; border-radius: var(--radius); margin-bottom: 30px; box-shadow: var(--shadow); position: relative; overflow: hidden; }
        .header-box::before { content: ''; position: absolute; top: 0; right: 0; width: 5px; height: 100%; background: var(--gold-gradient); }
        .header-box h2 { font-size: 1.8rem; margin-bottom: 10px; color: var(--text-main); }

        /* Review Grid */
        .chapters-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        .chapter-card { background: var(--card-bg); padding: 25px; border-radius: var(--radius); box-shadow: var(--shadow); cursor: pointer; transition: transform 0.3s; position: relative; overflow: hidden; border: 1px solid rgba(0,0,0,0.05); }
        .chapter-card:hover { transform: translateY(-8px); border-bottom: 4px solid #f1c40f; }
        .card-icon { font-size: 2.5rem; margin-bottom: 15px; display: block; }
        .card-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 10px; }
        .card-desc { font-size: 0.9rem; color: var(--text-light); line-height: 1.6; }

        /* Quiz */
        .quiz-container { max-width: 800px; margin: 0 auto; }
        .question-card { background: var(--card-bg); padding: 40px; border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: 20px; }
        .option-btn { display: block; width: 100%; padding: 18px; margin: 12px 0; background: var(--bg-main); border: 2px solid transparent; border-radius: 12px; cursor: pointer; font-size: 1rem; color: var(--text-main); transition: 0.2s; text-align: right; font-weight: 600; }
        .option-btn:hover:not(.disabled) { border-color: #3498db; background: rgba(52,152,219,0.05); transform: translateX(-5px); }
        .option-btn.correct { background: rgba(39, 174, 96, 0.15); border-color: #27ae60; color: #27ae60; }
        .option-btn.wrong { background: rgba(192, 57, 43, 0.15); border-color: #c0392b; color: #c0392b; }
        .btn-primary { background: var(--gold-gradient); border: none; padding: 12px 40px; border-radius: 30px; font-weight: bold; cursor: pointer; color: #2c3e50; font-size: 1.1rem; margin-top: 20px; box-shadow: 0 5px 15px rgba(241, 196, 15, 0.3); transition: 0.3s; }
        .btn-primary:hover { transform: scale(1.05); }

        /* Flashcards */
        .flashcard-wrapper { perspective: 1000px; max-width: 600px; margin: 40px auto; }
        .card { height: 350px; position: relative; transform-style: preserve-3d; transition: transform 0.8s; border-radius: var(--radius); box-shadow: var(--shadow); cursor: pointer; }
        .card.is-flipped { transform: rotateY(180deg); }
        .card__face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: var(--radius); padding: 30px; text-align: center; background: var(--card-bg); }
        .card__face--back { background: var(--blue-gradient); color: white; transform: rotateY(180deg); }
        .fc-controls { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }

        /* Search */
        .search-bar input { width: 100%; padding: 20px; border-radius: 50px; border: none; background: var(--card-bg); box-shadow: var(--shadow); font-size: 1.1rem; color: var(--text-main); }

        /* Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 100; display: none; justify-content: center; align-items: center; }
        .modal-box { background: var(--card-bg); width: 90%; max-width: 800px; max-height: 85vh; border-radius: var(--radius); padding: 40px; overflow-y: auto; position: relative; box-shadow: 0 25px 50px rgba(0,0,0,0.5); animation: zoomIn 0.3s; }
        .close-btn { position: absolute; top: 20px; left: 20px; font-size: 2rem; cursor: pointer; color: #c0392b; background: none; border: none; }
        .modal-body { line-height: 1.8; font-size: 1.1rem; }
        .modal-body h3 { color: #2980b9; margin-top: 25px; margin-bottom: 10px; border-bottom: 2px solid #f1c40f; display: inline-block; padding-bottom: 5px; }
        .modal-body ul { margin-right: 20px; }
        .citation { font-size: 0.85rem; color: var(--text-light); font-style: italic; display: block; margin-top: 5px; }

        .hidden { display: none !important; }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @media (max-width: 768px) { .app-container { flex-direction: column; } .sidebar { width: 100%; padding: 15px; flex-direction: row; justify-content: space-between; align-items: center; } .logo-area, .theme-toggle { display: none; } .nav-btn { flex-direction: column; padding: 10px; font-size: 0.8rem; text-align: center; gap: 5px; } .main-content { padding: 20px; } }
    </style>
</head>
<body>

    <div class="app-container">
        <aside class="sidebar">
            <div class="logo-area">
                <div class="logo-icon">โ๏ธ</div>
                <h1>ุงููุถุงุก ุงูุฌุฒุงุฆุฑู</h1>
                <p>ูุฑุงุฌุนุฉ ุดุงููุฉ 2025</p>
            </div>
            <nav>
                <button class="nav-btn active" onclick="app.switchTab('review', this)">๐ <span>ุงูููุณูุนุฉ</span></button>
                <button class="nav-btn" onclick="app.switchTab('quiz', this)">๐ <span>ุงูุงุฎุชุจุงุฑ</span></button>
                <button class="nav-btn" onclick="app.switchTab('flashcards', this)">๐ก <span>ุงูุจุทุงูุงุช</span></button>
                <button class="nav-btn" onclick="app.switchTab('search', this)">๐ <span>ุงูุจุญุซ</span></button>
            </nav>
            <div class="theme-toggle" onclick="app.toggleDarkMode()">๐ ุงููุถุน ุงููููู</div>
        </aside>

        <main class="main-content">
            <section id="review-section" class="tab-content">
                <header class="header-box">
                    <h2>ุงูููุณูุนุฉ ุงููุงููููุฉ ุงูุดุงููุฉ</h2>
                    <p>ููุฎุตุงุช ุฏูููุฉ ูููุงู ูุขุฎุฑ ุงูุชุนุฏููุงุช (ุงููุงููู ุงูุนุถูู 22/10ุ 22/07...)</p>
                </header>
                <div class="chapters-grid" id="chapters-container"></div>
            </section>

            <section id="quiz-section" class="tab-content hidden">
                <div class="quiz-container">
                    <header class="header-box">
                        <h2>ุงูุงุฎุชุจุงุฑ ุงูุชูุงุนูู ุงูุฐูู</h2>
                        <p>ุงุฎุชุจุฑ ูุนูููุงุชู ูู ุงูููุงุฏุ ุงูุชุดูููุงุชุ ูุงูุขุฌุงู ุงููุงููููุฉ.</p>
                        <div style="margin-top:10px; font-weight:bold; color:#27ae60">ุฃูุถู ูุชูุฌุฉ: <span id="high-score">0</span>%</div>
                    </header>
                    
                    <div id="quiz-start" class="question-card" style="text-align:center">
                        <div style="font-size:4rem; margin-bottom:20px">๐</div>
                        <h3>ูู ุฃูุช ูุณุชุนุฏ ููุชุญุฏูุ</h3>
                        <p style="margin-bottom:20px; color:var(--text-light)">ุฃุณุฆูุฉ ุฏูููุฉ ูู ููุจ ุงูููุฑุฑ ุงูุฏุฑุงุณู.</p>
                        <button class="btn-primary" onclick="quizManager.start()">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ ุงูุขู</button>
                    </div>

                    <div id="quiz-play" class="hidden">
                        <div class="question-card">
                            <div style="display:flex; justify-content:space-between; margin-bottom:15px; color:var(--text-light)">
                                <span id="q-progress">ุณุคุงู 1 / 10</span>
                                <span>ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ</span>
                            </div>
                            <h3 id="q-text" style="font-size:1.3rem; line-height:1.6; margin-bottom:25px">ุงูุณุคุงู...</h3>
                            <div id="options-container"></div>
                        </div>
                        <div id="feedback" class="question-card hidden" style="border-right: 5px solid #f1c40f;">
                            <h4 id="fb-msg" style="margin-bottom:10px"></h4>
                            <p id="fb-explanation" style="line-height:1.6"></p>
                            <span id="fb-citation" class="citation"></span>
                            <button class="btn-primary" onclick="quizManager.next()">ุงูุชุงูู โฌ</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="flashcards-section" class="tab-content hidden">
                <header class="header-box">
                    <h2>ุจุทุงูุงุช ุงูุฐุงูุฑุฉ (Flashcards)</h2>
                    <p>ููุญูุธ ุงูุณุฑูุน: ุงุถุบุท ุนูู ุงูุจุทุงูุฉ ูููุจูุง</p>
                </header>
                <div class="flashcard-wrapper">
                    <div class="card" onclick="flashcardManager.flip()">
                        <div class="card__face card__face--front">
                            <span style="font-size:3rem; margin-bottom:20px; opacity:0.8">โ</span>
                            <h3 id="fc-front" style="font-size:1.4rem">ุงูุณุคุงู</h3>
                            <p style="margin-top:20px; font-size:0.9rem; opacity:0.6">ุงุถุบุท ููุฅุฌุงุจุฉ</p>
                        </div>
                        <div class="card__face card__face--back">
                            <h3 id="fc-back" style="font-size:1.3rem; margin-bottom:15px">ุงูุฅุฌุงุจุฉ</h3>
                            <span id="fc-cite" style="background:rgba(255,255,255,0.2); padding:5px 10px; border-radius:10px; font-size:0.9rem">ุงููุตุฏุฑ</span>
                        </div>
                    </div>
                    <div class="fc-controls">
                        <button class="btn-primary" style="margin:0; padding:10px 30px" onclick="flashcardManager.prev()">ุงูุณุงุจู</button>
                        <span id="fc-count" style="font-weight:bold; font-size:1.2rem; display:flex; align-items:center">1/10</span>
                        <button class="btn-primary" style="margin:0; padding:10px 30px" onclick="flashcardManager.next()">ุงูุชุงูู</button>
                    </div>
                </div>
            </section>

            <section id="search-section" class="tab-content hidden">
                <header class="header-box">
                    <h2>ุงูุจุญุซ ุงููุชูุฏู</h2>
                    <div class="search-bar">
                        <input type="text" id="search-input" placeholder="ุงูุชุจ ููุจุญุซ ุนู: ูุญููุฉ ุงูุชูุงุฒุนุ ุงูููุซูุ ุงููุงุฏุฉ 165..." onkeyup="app.search()">
                    </div>
                </header>
                <div id="search-results" class="chapters-grid"></div>
            </section>
        </main>
    </div>

    <div id="modal" class="modal-overlay">
        <div class="modal-box">
            <button class="close-btn" onclick="app.closeModal()">ร</button>
            <div style="display:flex; align-items:center; gap:15px; margin-bottom:20px; border-bottom:1px solid #eee; padding-bottom:15px">
                <span id="modal-icon" style="font-size:2.5rem"></span>
                <h2 id="modal-title" style="margin:0; color:var(--text-main)"></h2>
            </div>
            <div id="modal-content" class="modal-body"></div>
        </div>
    </div>

    <script>
        // --- 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุงููุฉ (ูู ุงูููู ุงููุฑูู) ---
        const db = {
            review: [
                {
                    id: "principles",
                    title: "ูุจุงุฏุฆ ุงูุชูุธูู ุงููุถุงุฆู",
                    icon: "โ๏ธ",
                    desc: "ุงูุฃุณุณ ุงูุฏุณุชูุฑูุฉ: ุงูุงุณุชููุงููุฉุ ุงููุณุงูุงุฉุ ูุงูุชูุงุถู ุนูู ุฏุฑุฌุชูู.",
                    content: `
                        <h3>1. ุญู ุงููุฌูุก ุฅูู ุงููุถุงุก</h3>
                        <p>ุญู ููููู ุฏุณุชูุฑูุงู (ุงููุงุฏุชูู 164 ู 165 ูู ุฏุณุชูุฑ 2020). ูุง ูููู ุงูุชูุงุฒู ุนูู. <br><strong>ุงุณุชุซูุงุกุงุช:</strong> ุงูุงุชูุงู ุนูู ุงูุชุญููู (ู 1006 ู.ุฅ.ู.ุฅ) ุฃู ุชูููุฏ ุงูุขุฌุงู (ูุซู 4 ุฃุดูุฑ ูุฏุนูู ุงูุฅูุบุงุก).</p>
                        
                        <h3>2. ูุจุฏุฃ ุงููุณุงูุงุฉ</h3>
                        <p>ูููู ุงููุถุงุก ุนูู ุฃุณุงุณ ูุจุงุฏุฆ ุงูุดุฑุนูุฉ ูุงููุณุงูุงุฉ (ุงููุงุฏุฉ 165 ุฏุณุชูุฑ). ูุชุญูู ุจูุญุฏุฉ ุงูุฌูุงุช ุงููุถุงุฆูุฉ ููุญุฏุฉ ุงููุงููู. <br><strong>ุงุณุชุซูุงุกุงุช:</strong> ุงูุญุตุงูุฉ ุงูุจุฑููุงููุฉ ูุงูุฏุจูููุงุณูุฉ.</p>
                        
                        <h3>3. ูุจุฏุฃ ุนูุงููุฉ ุงูุฌูุณุงุช</h3>
                        <p>ุงูุฃุตู ุงูุนูุงููุฉ (ู 169 ุฏุณุชูุฑ) ูุถูุงู ุงูุดูุงููุฉ. <br><strong>ุงูุงุณุชุซูุงุก (ุงูุณุฑูุฉ):</strong> ูุถุงูุง ุดุคูู ุงูุฃุณุฑุฉุ ุงูุฃุญุฏุงุซุ ุฃู ูุง ููุณ ุงููุธุงู ุงูุนุงู ูุงูุขุฏุงุจ ุงูุนุงูุฉ (ุงููุงุฏุฉ 07 ู.ุฅ.ู.ุฅ).</p>
                        
                        <h3>4. ูุจุฏุฃ ุงูุชูุงุถู ุนูู ุฏุฑุฌุชูู</h3>
                        <p>ูุณูุญ ุจุนุฑุถ ุงููุฒุงุน ูุฌุฏุฏุงู ุฃูุงู ุฌูุฉ ุฃุนูู (ุงููุฌูุณ ุงููุถุงุฆู ุฃู ุงููุญููุฉ ุงูุฅุฏุงุฑูุฉ ููุงุณุชุฆูุงู) ูุชุตุญูุญ ุงูุฃุฎุทุงุก. (ุงููุงุฏุฉ 06 ู.ุฅ.ู.ุฅ).</p>
                    `
                },
                {
                    id: "ordinary_courts",
                    title: "ุงููุธุงู ุงููุถุงุฆู ุงูุนุงุฏู",
                    icon: "๐๏ธ",
                    desc: "ุงููุญููุฉุ ุงููุฌูุณ ุงููุถุงุฆูุ ูุงููุญููุฉ ุงูุนููุง (ุงููุงููู ุงูุนุถูู 22/10).",
                    content: `
                        <h3>1. ุงููุญููุฉ (ุงูุฏุฑุฌุฉ ุงูุฃููู)</h3>
                        <p>ูุงุนุฏุฉ ุงููุฑู ุงููุถุงุฆู (ุงููุงุฏุฉ 32 ู.ุฅ.ู.ุฅ). ุงูุฃุตู ูููุง ุงููุถุงุก ุงููุฑุฏู (ุงูุฌูุญุ ุงูุฃุณุฑุฉ)ุ ูุชููู <strong>ุฌูุงุนูุฉ</strong> ูู: ุงูุงุฌุชูุงุนูุ ุงูุชุฌุงุฑูุ ูุงูุฃุญุฏุงุซ.</p>
                        <ul>
                            <li><strong>ุงูุฃูุณุงู:</strong> ุงููุฏููุ ุงูุนูุงุฑูุ ุดุคูู ุงูุฃุณุฑุฉุ ุงูุงุฌุชูุงุนูุ ุงูุชุฌุงุฑูุ ุงูุจุญุฑูุ ุงูุงุณุชุนุฌุงููุ ุงูุฌูุญุ ุงููุฎุงููุงุชุ ุงูุฃุญุฏุงุซ.</li>
                        </ul>

                        <h3>2. ุงููุฌูุณ ุงููุถุงุฆู (ุงูุฏุฑุฌุฉ ุงูุซุงููุฉ)</h3>
                        <p>ูุฎุชุต ุจุงุณุชุฆูุงู ุฃุญูุงู ุงููุญุงูู (ุงููุงุฏุฉ 34 ู.ุฅ.ู.ุฅ). ุงูุนูู ููู <strong>ุฌูุงุนู ุฏุงุฆูุงู</strong> (3 ูุถุงุฉ). <br><strong>ุงูุบุฑู:</strong> ูุฏููุฉุ ุฌุฒุงุฆูุฉุ ุนูุงุฑูุฉุ ุดุคูู ุงูุฃุณุฑุฉุ ุชุฌุงุฑูุฉุ ุจุญุฑูุฉุ ุงุฌุชูุงุนูุฉุ ุบุฑูุฉ ุงูุงุชูุงู.</p>

                        <h3>3. ุงููุญููุฉ ุงูุนููุง (ููุฉ ุงููุฑู)</h3>
                        <p>ููุณุช ุฏุฑุฌุฉ ุซุงูุซุฉุ ุจู "ูุญููุฉ ูุงููู" ุชุฑุงูุจ ุงูุชุทุจูู ุงูุณููู ูููุงููู. <br><strong>ุงูุบุฑู (7):</strong> ุงููุฏููุฉุ ุงูุนูุงุฑูุฉุ ุดุคูู ุงูุฃุณุฑุฉุ ุงูุชุฌุงุฑูุฉ ูุงูุจุญุฑูุฉุ ุงูุงุฌุชูุงุนูุฉุ ุงูุฌูุงุฆูุฉุ ุงูุฌูุญ ูุงููุฎุงููุงุช.</p>
                    `
                },
                {
                    id: "admin_courts",
                    title: "ุงููุธุงู ุงููุถุงุฆู ุงูุฅุฏุงุฑู",
                    icon: "๐",
                    desc: "ุงููุญุงูู ุงูุฅุฏุงุฑูุฉุ ูุญุงูู ุงูุงุณุชุฆูุงูุ ููุฌูุณ ุงูุฏููุฉ (ุชุนุฏูู 2022).",
                    content: `
                        <h3>1. ุงููุญุงูู ุงูุฅุฏุงุฑูุฉ</h3>
                        <p>ุฌูุฉ ุงูููุงูุฉ ุงูุนุงูุฉ ูู ุงูููุงุฒุนุงุช ุงูุฅุฏุงุฑูุฉ (ุงูุฏููุฉุ ุงูููุงูุฉุ ุงูุจูุฏูุฉ ุทุฑูุงู). ุชูุตู ุจุญูู ูุงุจู ููุงุณุชุฆูุงู. ุชุดูููุชูุง ุฌูุงุนูุฉ (3 ูุถุงุฉ).</p>
                        
                        <h3>2. ุงููุญุงูู ุงูุฅุฏุงุฑูุฉ ููุงุณุชุฆูุงู</h3>
                        <p>ุชู ุงุณุชุญุฏุงุซูุง ุจุงููุงููู 22/07 ูุชูุฑูุณ ูุจุฏุฃ ุงูุชูุงุถู ุนูู ุฏุฑุฌุชูู. ุชุฎุชุต ุจุงุณุชุฆูุงู ุฃุญูุงู ุงููุญุงูู ุงูุฅุฏุงุฑูุฉ. <br><strong>ุนุฏุฏูุง:</strong> 6 ูุญุงูู ุฌูููุฉ (ุงูุฌุฒุงุฆุฑุ ููุฑุงูุ ูุณูุทููุฉุ ูุฑููุฉุ ุจุดุงุฑุ ุชุงููุบุณุช).</p>

                        <h3>3. ูุฌูุณ ุงูุฏููุฉ</h3>
                        <p>ุงูููุฆุฉ ุงูููููุฉ ูุฃุนูุงู ุงูุฌูุงุช ุงููุถุงุฆูุฉ ุงูุฅุฏุงุฑูุฉ (ููุงุฒู ุงููุญููุฉ ุงูุนููุง). ูุถูู ุชูุญูุฏ ุงูุงุฌุชูุงุฏ ุงููุถุงุฆู ุงูุฅุฏุงุฑู. ูู ุงุฎุชุตุงุต ูุถุงุฆู ูุงุณุชุดุงุฑู (ุฅุจุฏุงุก ุงูุฑุฃู ูู ูุดุงุฑูุน ุงูููุงููู).</p>
                    `
                },
                {
                    id: "specialized",
                    title: "ุงููุญุงูู ุงููุชุฎุตุตุฉ",
                    icon: "๐จ",
                    desc: "ุงููุญุงูู ุงูุชุฌุงุฑูุฉ ุงููุชุฎุตุตุฉ ูุงููุญุงูู ุงูุนุณูุฑูุฉ.",
                    content: `
                        <h3>1. ุงููุญุงูู ุงูุชุฌุงุฑูุฉ ุงููุชุฎุตุตุฉ</h3>
                        <p>ุฃูุดุฆุช ุจุงููุงููู 22/13. ุชุฎุชุต ุจููุงุฒุนุงุช ุงูููููุฉ ุงูููุฑูุฉุ ุงูุดุฑูุงุชุ ุงูุชุฌุงุฑุฉ ุงูุฏูููุฉุ ุงูุจูููุ ุงูุฅููุงุณ. <br><strong>ุงูุชุดูููุฉ:</strong> ูุงุถู ุฑุฆูุณ + <strong>4 ูุณุงุนุฏูู</strong> (ุฎุจุฑุงุก) ููู ุฏุฑุงูุฉ ุจุงููุณุงุฆู ุงูุชุฌุงุฑูุฉ (ุงููุงุฏุฉ 536 ููุฑุฑ 2).</p>
                        
                        <h3>2. ุงููุญุงูู ุงูุนุณูุฑูุฉ</h3>
                        <p>ุชุชุจุน ูุฒุงุฑุฉ ุงูุฏูุงุน. ุชุฎุชุต ุจุงูุฌุฑุงุฆู ุงูุนุณูุฑูุฉ ุฃู ุงููุฑุชูุจุฉ ุฃุซูุงุก ุงูุฎุฏูุฉ. <br><strong>ุงูุชุดูููุฉ:</strong> ูุงุถู ูุฏูู (ุฑุฆูุณ) + ูุถุงุฉ ุนุณูุฑููู. ุชูุฌุฏ ุนูู ูุณุชูู ุงูููุงุญู ุงูุนุณูุฑูุฉ.</p>
                    `
                },
                {
                    id: "conflict",
                    title: "ูุญููุฉ ุงูุชูุงุฒุน",
                    icon: "โก",
                    desc: "ุงููุตู ูู ุชูุงุฒุน ุงูุงุฎุชุตุงุต ุจูู ุงููุธุงููู ุงูุนุงุฏู ูุงูุฅุฏุงุฑู.",
                    content: `
                        <h3>ุงูุชุดูููุฉ</h3>
                        <p>ุชุชููู ูู 7 ูุถุงุฉ: ุฑุฆูุณ (ุฏูุฑูุฉ)ุ 3 ูู ุงููุญููุฉ ุงูุนููุงุ ู3 ูู ูุฌูุณ ุงูุฏููุฉ. (ุงููุงุฏุฉ 152 ุฏุณุชูุฑ).</p>
                        <h3>ุงูุงุฎุชุตุงุต</h3>
                        <p>ุชูุตู ูู ุชูุงุฒุน ุงูุงุฎุชุตุงุต ุงูุฅูุฌุงุจู (ุชูุณู ุงูุฌูุชูู ุจุงูุงุฎุชุตุงุต) ุฃู ุงูุณูุจู (ุชุฎูู ุงูุฌูุชูู)ุ ูุชูุงุฒุน ุงููุฑุงุฑุงุช ุงููุชูุงูุถุฉ.</p>
                    `
                },
                {
                    id: "auxiliaries",
                    title: "ุฃุนูุงู ุงููุถุงุก",
                    icon: "๐ฅ",
                    desc: "ุงููุญุงููุ ุงูููุซูุ ุงููุญุถุฑุ ูุงูุฎุจูุฑ.",
                    content: `
                        <ul>
                            <li><strong>ุงููุญุงูู:</strong> ูููุฉ ุญุฑุฉ ููุฏูุงุน ุนู ุงููุชูุงุถูู. ูุดุชุฑุท ุดูุงุฏุฉ ุงูููุงุกุฉ (CAPA).</li>
                            <li><strong>ุงูููุซู:</strong> ุถุงุจุท ุนูููู ูุญุฑุฑ ุงูุนููุฏ ุงูุฑุณููุฉ (ููู ุงูููููุฉุ ุงูุดุฑูุงุช).</li>
                            <li><strong>ุงููุญุถุฑ ุงููุถุงุฆู:</strong> ูุชููู ุชุจููุบ ุงูุนุฑุงุฆุถ ูุชูููุฐ ุงูุฃุญูุงู ุงููุถุงุฆูุฉ (ุงูุญุฌุฒุ ุงูุทุฑุฏ).</li>
                            <li><strong>ุงูุฎุจูุฑ ุงููุถุงุฆู:</strong> ููู (ุทุจูุจุ ูููุฏุณ) ูุณุชุนูู ุจู ุงููุงุถู ูุชูุถูุญ ูุณุงุฆู ุชูููุฉ.</li>
                        </ul>
                    `
                }
            ],

            questions: [
                {
                    q: "ูู ุนุฏุฏ ุงููุณุงุนุฏูู ูู ุชุดูููุฉ ุงููุญููุฉ ุงูุชุฌุงุฑูุฉ ุงููุชุฎุตุตุฉุ",
                    options: ["ูุณุงุนุฏุงู ุงุซูุงู", "ุซูุงุซุฉ ูุณุงุนุฏูู", "ุฃุฑุจุนุฉ ูุณุงุนุฏูู", "ูุง ููุฌุฏ ูุณุงุนุฏูู"],
                    correct: 2,
                    explanation: "ุชุชุดูู ุงููุญููุฉ ุงูุชุฌุงุฑูุฉ ุงููุชุฎุตุตุฉ ูู ูุงุถู ุฑุฆูุณ ู 04 ูุณุงุนุฏูู ููู ุฏุฑุงูุฉ ูุงุณุนุฉ ุจุงููุณุงุฆู ุงูุชุฌุงุฑูุฉ (ุงููุงุฏุฉ 536 ููุฑุฑ 2).",
                    citation: "ููู ุงููุญุงุถุฑุงุช - ุงููุญุงูู ุงููุชุฎุตุตุฉ"
                },
                {
                    q: "ูุง ูู ุงููููุฉ ุงููุงููููุฉ ูุงุณุชุฆูุงู ุฃุญูุงู ูุญููุฉ ุงูุฌูุงูุงุช ุงูุงุจุชุฏุงุฆูุฉุ",
                    options: ["8 ุฃูุงู", "10 ุฃูุงู", "15 ูููุงู", "ุดูุฑ ูุงุญุฏ"],
                    correct: 1,
                    explanation: "ุชูุถู ูุญููุฉ ุงูุฌูุงูุงุช ุงูุงุจุชุฏุงุฆูุฉ ุจุญูู ุงุจุชุฏุงุฆู ูุงุจู ููุงุณุชุฆูุงู ุฃูุงู ุงููุญููุฉ ุงูุฌูุงุฆูุฉ ุงูุงุณุชุฆูุงููุฉ ูู ูููุฉ 10 ุฃูุงู.",
                    citation: "ููู ุงููุญุงุถุฑุงุช - ูุญููุฉ ุงูุฌูุงูุงุช"
                },
                {
                    q: "ูู ููุตู ูู ุชูุงุฒุน ุงูุงุฎุชุตุงุต ุจูู ุงููุถุงุก ุงูุนุงุฏู ูุงูุฅุฏุงุฑูุ",
                    options: ["ุงููุญููุฉ ุงูุนููุง", "ูุฌูุณ ุงูุฏููุฉ", "ูุญููุฉ ุงูุชูุงุฒุน", "ุงููุฌูุณ ุงูุฏุณุชูุฑู"],
                    correct: 2,
                    explanation: "ูุญููุฉ ุงูุชูุงุฒุน ูู ุงูููุฆุฉ ุงููุฎุชุตุฉ ุญุตุฑูุงู ุจุงููุตู ูู ุงูุชูุงุฒุน ุจูู ุงููุธุงููู (ุงููุงุฏุฉ 152 ุฏุณุชูุฑ).",
                    citation: "ููู ุงููุญุงุถุฑุงุช - ูุญููุฉ ุงูุชูุงุฒุน"
                },
                {
                    q: "ูุนุชุจุฑ ุงููุฌูุณ ุงููุถุงุฆู ูู ุงููุธุงู ุงูุฌุฒุงุฆุฑู:",
                    options: ["ุฏุฑุฌุฉ ุซุงูุซุฉ", "ุฏุฑุฌุฉ ุซุงููุฉ ููุชูุงุถู", "ูุญููุฉ ููุถ", "ูุญููุฉ ุงุจุชุฏุงุฆูุฉ"],
                    correct: 1,
                    explanation: "ุงููุฌูุณ ุงููุถุงุฆู ูู ุงูุฌูุฉ ุงููุฎุชุตุฉ ุจุงููุตู ูู ุงุณุชุฆูุงู ุฃุญูุงู ุงููุญุงููุ ุฃู ุฃูู ุฏุฑุฌุฉ ุซุงููุฉ.",
                    citation: "ุงููุงููู ุงูุนุถูู 22/10"
                },
                {
                    q: "ุชุชุดูู ูุญููุฉ ุงูุชูุงุฒุน ูู:",
                    options: ["5 ูุถุงุฉ", "7 ูุถุงุฉ", "9 ูุถุงุฉ", "11 ูุงุถูุงู"],
                    correct: 1,
                    explanation: "ุชุชููู ูู 7 ูุถุงุฉ: ุฑุฆูุณุ 3 ูู ุงููุญููุฉ ุงูุนููุงุ ู3 ูู ูุฌูุณ ุงูุฏููุฉ.",
                    citation: "ููู ุงููุญุงุถุฑุงุช"
                },
                {
                    q: "ุฃูุงู ุฃู ุฌูุฉ ูุชู ุงูุทุนู ุจุงูููุถ ูู ูุฑุงุฑุงุช ุงูุบุฑูุฉ ุงูุงุชูุงูุ",
                    options: ["ูุฌูุณ ุงูุฏููุฉ", "ุงููุญููุฉ ุงูุนููุง", "ุฑุฆูุณ ุงููุฌูุณ ุงููุถุงุฆู", "ูุง ูุฌูุฒ ุงูุทุนู ูููุง"],
                    correct: 1,
                    explanation: "ูุฌูุฒ ุงูุทุนู ุจุงูููุถ ุฃูุงู ุงููุญููุฉ ุงูุนููุง ูู ูุฑุงุฑุงุช ุบุฑูุฉ ุงูุงุชูุงู.",
                    citation: "ููู ุงููุญุงุถุฑุงุช - ุบุฑูุฉ ุงูุงุชูุงู"
                },
                {
                    q: "ูู ูุฌูุฒ ูููุงุถู ููุงุฑุณุฉ ุงูุฃุนูุงู ุงูุชุฌุงุฑูุฉุ",
                    options: ["ูุนูุ ูุฒูุงุฏุฉ ุฏุฎูู", "ูุงุ ูููุน ููุนุงู ุจุงุชุงู", "ูุนูุ ุจุฅุฐู ุงููุฒูุฑ", "ูุนูุ ูู ุงูุนุทู ููุท"],
                    correct: 1,
                    explanation: "ูููุน ุนูู ุงููุงุถู ููุงุฑุณุฉ ุฃู ูุธููุฉ ุฃุฎุฑู ุฃู ูุดุงุท ุชุฌุงุฑู ูุฑุจุญ ุญูุงุธุงู ุนูู ุญูุงุฏู ููุฑุงูุฉ ุงููุธููุฉ.",
                    citation: "ููู ุงููุญุงุถุฑุงุช - ูุงุฌุจุงุช ุงููุงุถู"
                },
                {
                    q: "ูุง ูู ุงูุงุฎุชุตุงุต ุงูุฅููููู ุงูุนุงู ูููุญุงููุ",
                    options: ["ููุทู ุงููุฏุนู", "ููุทู ุงููุฏุนู ุนููู", "ููุงู ุฅุจุฑุงู ุงูุนูุฏ", "ููุงู ุงูุนูุงุฑ"],
                    correct: 1,
                    explanation: "ุงููุงุนุฏุฉ ุงูุนุงูุฉ (ุงููุงุฏุฉ 37 ู.ุฅ.ู.ุฅ) ูู ุฃู ุงูุงุฎุชุตุงุต ูุคูู ูููุญููุฉ ุงูุชู ููุน ุจุฏุงุฆุฑุชูุง ููุทู ุงููุฏุนู ุนููู.",
                    citation: "ููู ุงููุญุงุถุฑุงุช - ุงูุงุฎุชุตุงุต"
                },
                {
                    q: "ุชุฎุชุต ุงููุญุงูู ุงูุฅุฏุงุฑูุฉ ููุงุณุชุฆูุงู ุจู:",
                    options: ["ุงููุตู ุงุจุชุฏุงุฆูุงู ูู ุงููุฒุงุนุงุช", "ุงูุทุนู ุจุงูููุถ", "ุงุณุชุฆูุงู ุฃุญูุงู ุงููุญุงูู ุงูุฅุฏุงุฑูุฉ", "ุงููุฒุงุนุงุช ุงูุชุฌุงุฑูุฉ"],
                    correct: 2,
                    explanation: "ุฃูุดุฆุช ูุชููู ุฏุฑุฌุฉ ุซุงููุฉ ููุชูุงุถู ูู ุงูููุงุฏ ุงูุฅุฏุงุฑูุฉ (ุงุณุชุฆูุงู ุฃุญูุงู ุงููุญุงูู ุงูุฅุฏุงุฑูุฉ).",
                    citation: "ุงููุงููู 22/07"
                },
                {
                    q: "ุนุฏุฏ ุงูุบุฑู ูู ุงููุญููุฉ ุงูุนููุง ูู:",
                    options: ["5 ุบุฑู", "7 ุบุฑู", "8 ุบุฑู", "10 ุบุฑู"],
                    correct: 1,
                    explanation: "ุชุชุฃูู ูู 7 ุบุฑู: ุงููุฏููุฉุ ุงูุนูุงุฑูุฉุ ุดุคูู ุงูุฃุณุฑุฉุ ุงูุชุฌุงุฑูุฉุ ุงูุงุฌุชูุงุนูุฉุ ุงูุฌูุงุฆูุฉุ ูุงูุฌูุญ.",
                    citation: "ููู ุงููุญุงุถุฑุงุช - ุงููุญููุฉ ุงูุนููุง"
                }
            ],

            flashcards: [
                { q: "ุนุฏุฏ ูุถุงุฉ ูุญููุฉ ุงูุชูุงุฒุน", a: "7 ูุถุงุฉ (3 ุนููุง + 3 ูุฌูุณ ุฏููุฉ + ุฑุฆูุณ)", cite: "ููู ุงููุญุงุถุฑุงุช" },
                { q: "ูููุฉ ุงุณุชุฆูุงู ุฃุญูุงู ุงูุฌูุงูุงุช", a: "10 ุฃูุงู ูู ุงููุทู ุจุงูุญูู", cite: "ู.ุฅ.ุฌ" },
                { q: "ุณู ุงููุจูู ูู ุงููุถุงุก", a: "ุจูู 27 ู 40 ุณูุฉ", cite: "ู.ุฃ ุงููุถุงุก" },
                { q: "ุชุดูููุฉ ุงููุญููุฉ ุงูุชุฌุงุฑูุฉ", a: "ูุงุถู ุฑุฆูุณ + 4 ูุณุงุนุฏูู", cite: "ูุงููู 22/13" },
                { q: "ุงูุบุฑู ุงููุฌุชูุนุฉ", a: "ุงุฌุชูุงุน ุบุฑู ุงููุญููุฉ ุงูุนููุง ูุชูุญูุฏ ุงูุงุฌุชูุงุฏ", cite: "ู.ุน ุงููุญููุฉ ุงูุนููุง" },
                { q: "ุงููุญุถุฑ ุงููุถุงุฆู", a: "ูููู ุจุชุจููุบ ูุชูููุฐ ุงูุฃุญูุงู ุงููุถุงุฆูุฉ", cite: "ูุงููู 06/03" },
                { q: "ูุฌูุณ ุงูุฏููุฉ", a: "ููุฆุฉ ููููุฉ ูููุถุงุก ุงูุฅุฏุงุฑู ูุฌูุฉ ุงุณุชุดุงุฑูุฉ", cite: "ูุงููู 98/01" },
                { q: "ุบุฑูุฉ ุงูุงุชูุงู", a: "ุฌูุฉ ุชุญููู ุซุงููุฉ ูู ุงููุฌูุณ ุงููุถุงุฆู", cite: "ู.ุฅ.ุฌ" },
                { q: "ุงููุญุงูู ุงูุฅุฏุงุฑูุฉ ููุงุณุชุฆูุงู", a: "6 ูุญุงูู ุฌูููุฉ (ุฏุฑุฌุฉ ุซุงููุฉ ุฅุฏุงุฑูุฉ)", cite: "ูุงููู 22/07" },
                { q: "ูุจุฏุฃ ุงูุนูุงููุฉ", a: "ุงูุฃุตู ุนูุงููุฉ ุงูุฌูุณุงุช ุฅูุง ูู ุงุณุชุซูุงุกุงุช (ุงูุฃุณุฑุฉ/ุงููุธุงู ุงูุนุงู)", cite: "ู 169 ุฏุณุชูุฑ" }
            ]
        };

        // --- 2. ุงูููุทู ุงูุจุฑูุฌู (App Logic) ---
        const app = {
            init: function() {
                this.loadTheme();
                this.renderReviews();
                quizManager.loadScore();
                flashcardManager.init();
            },

            switchTab: function(tabId, btn) {
                document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
                document.getElementById(tabId + '-section').classList.remove('hidden');
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                if(btn) btn.classList.add('active');
            },

            toggleDarkMode: function() {
                document.body.classList.toggle('dark-mode');
                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            },

            loadTheme: function() {
                if(localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
            },

            renderReviews: function() {
                const container = document.getElementById('chapters-container');
                container.innerHTML = db.review.map(item => `
                    <div class="chapter-card" onclick="app.openModal('${item.id}')">
                        <span class="card-icon">${item.icon}</span>
                        <div class="card-title">${item.title}</div>
                        <div class="card-desc">${item.desc}</div>
                    </div>
                `).join('');
            },

            openModal: function(id) {
                const item = db.review.find(i => i.id === id);
                if (!item) return;
                document.getElementById('modal-title').innerText = item.title;
                document.getElementById('modal-icon').innerText = item.icon;
                document.getElementById('modal-content').innerHTML = item.content;
                document.getElementById('modal').style.display = 'flex';
            },

            closeModal: function() {
                document.getElementById('modal').style.display = 'none';
            },

            search: function() {
                const query = document.getElementById('search-input').value.toLowerCase();
                const container = document.getElementById('search-results');
                container.innerHTML = '';
                
                if (query.length < 2) return;

                db.review.forEach(item => {
                    if (item.content.includes(query) || item.title.includes(query)) {
                        container.innerHTML += `
                            <div class="chapter-card" onclick="app.openModal('${item.id}')">
                                <span class="card-icon">๐</span>
                                <div class="card-title">${item.title}</div>
                                <div class="card-desc">ูุชูุฌุฉ ุจุญุซ ูุทุงุจูุฉ</div>
                            </div>
                        `;
                    }
                });
            }
        };

        const quizManager = {
            questions: [], index: 0, score: 0,

            loadScore: function() {
                const s = localStorage.getItem('quizScore') || 0;
                document.getElementById('high-score').innerText = s;
            },

            start: function() {
                this.questions = [...db.questions].sort(() => 0.5 - Math.random());
                this.index = 0; this.score = 0;
                document.getElementById('quiz-start').classList.add('hidden');
                document.getElementById('quiz-play').classList.remove('hidden');
                this.showQuestion();
            },

            showQuestion: function() {
                const q = this.questions[this.index];
                document.getElementById('q-progress').innerText = `ุณุคุงู ${this.index + 1} / ${this.questions.length}`;
                document.getElementById('q-text').innerText = q.q;
                document.getElementById('feedback').classList.add('hidden');
                
                const container = document.getElementById('options-container');
                container.innerHTML = '';
                q.options.forEach((opt, idx) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => this.check(idx, btn);
                    container.appendChild(btn);
                });
            },

            check: function(idx, btn) {
                const q = this.questions[this.index];
                const btns = document.querySelectorAll('.option-btn');
                btns.forEach(b => b.classList.add('disabled'));

                const feedback = document.getElementById('feedback');
                if(idx === q.correct) {
                    this.score++;
                    btn.classList.add('correct');
                    document.getElementById('fb-msg').innerText = "ุฅุฌุงุจุฉ ุตุญูุญุฉ! โ";
                    document.getElementById('fb-msg').style.color = "#27ae60";
                } else {
                    btn.classList.add('wrong');
                    btns[q.correct].classList.add('correct');
                    document.getElementById('fb-msg').innerText = "ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ โ";
                    document.getElementById('fb-msg').style.color = "#c0392b";
                }
                document.getElementById('fb-explanation').innerText = q.explanation;
                document.getElementById('fb-citation').innerText = "ุงููุตุฏุฑ: " + q.citation;
                feedback.classList.remove('hidden');
            },

            next: function() {
                this.index++;
                if(this.index < this.questions.length) {
                    this.showQuestion();
                } else {
                    const finalScore = Math.round((this.score / this.questions.length) * 100);
                    localStorage.setItem('quizScore', finalScore);
                    alert(`ุงูุชูู ุงูุงุฎุชุจุงุฑ!\nูุชูุฌุชู: ${finalScore}%`);
                    location.reload();
                }
            }
        };

        const flashcardManager = {
            index: 0,
            init: function() { this.render(); },
            render: function() {
                const card = db.flashcards[this.index];
                document.getElementById('fc-front').innerText = card.q;
                document.getElementById('fc-back').innerText = card.a;
                document.getElementById('fc-cite').innerText = card.cite;
                document.getElementById('fc-count').innerText = `${this.index + 1} / ${db.flashcards.length}`;
                document.querySelector('.card').classList.remove('is-flipped');
            },
            flip: function() { document.querySelector('.card').classList.toggle('is-flipped'); },
            next: function() { this.index = (this.index + 1) % db.flashcards.length; this.render(); },
            prev: function() { this.index = (this.index - 1 + db.flashcards.length) % db.flashcards.length; this.render(); }
        };

        window.onload = () => app.init();
    </script>
</body>
</html>
