<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الموسوعة الشاملة: مصادر الالتزام 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0f172a;
            --accent: #ca8a04; /* ذهبي */
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #334155;
            --correct: #16a34a;
            --wrong: #dc2626;
            --border: #e2e8f0;
        }

        * { box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        
        body { margin: 0; background-color: var(--bg); color: var(--text); padding-bottom: 60px; }

        /* الهيدر والعداد */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, #1e293b 100%);
            color: white;
            padding: 40px 20px 80px;
            text-align: center;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.3);
        }

        .exam-title { font-size: 2.2rem; font-weight: 900; margin: 0; color: var(--accent); }
        .exam-subtitle { opacity: 0.9; margin-top: 10px; font-size: 1.1rem; }

        .countdown-wrapper {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .time-unit {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 15px;
            min-width: 80px;
            text-align: center;
        }

        .time-value { font-size: 2rem; font-weight: 700; display: block; line-height: 1; }
        .time-label { font-size: 0.8rem; opacity: 0.8; }

        /* الحاوية الرئيسية */
        .main-container {
            max-width: 1000px;
            margin: -60px auto 0;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }

        /* شريط البحث */
        .search-box {
            width: 100%;
            padding: 15px 20px;
            border-radius: 15px;
            border: none;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            font-size: 1.1rem;
            margin-bottom: 20px;
            background: white url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8' stroke-width='2'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z' /%3E%3C/svg%3E") no-repeat left 15px center;
            background-size: 25px;
            padding-left: 50px;
        }

        /* التبويبات */
        .tabs {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 15px;
            scrollbar-width: none;
        }
        .tabs::-webkit-scrollbar { display: none; }

        .tab-btn {
            background: white;
            border: 1px solid var(--border);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            white-space: nowrap;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--text);
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 10px rgba(15, 23, 42, 0.2);
        }

        /* بطاقات الأسئلة */
        .q-card {
            background: white;
            border-radius: 16px;
            padding: 0;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            border: 1px solid var(--border);
            overflow: hidden;
            transition: transform 0.2s;
        }

        .q-card:hover { transform: translateY(-2px); }

        .q-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            font-size: 1.05rem;
            line-height: 1.6;
        }

        .q-badge {
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 6px;
            margin-left: 10px;
            vertical-align: middle;
        }
        .badge-tf { background: #e0f2fe; color: #0284c7; } /* صح وخطأ */
        .badge-direct { background: #fef9c3; color: #854d0e; } /* مباشر */

        .q-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: #f8fafc;
            border-top: 1px solid var(--border);
        }

        .q-content {
            padding: 20px;
            color: #475569;
            line-height: 1.8;
        }

        .ref-tag {
            display: block;
            margin-top: 12px;
            font-size: 0.85rem;
            color: #94a3b8;
            font-style: italic;
            border-top: 1px dashed #cbd5e1;
            padding-top: 8px;
        }

        .highlight { background-color: #fef08a; padding: 2px 5px; border-radius: 4px; }
        
        /* حالة الفتح */
        .q-card.open .q-body { max-height: 1000px; }
        .q-card.open .icon { transform: rotate(180deg); }
        .icon { transition: transform 0.3s; }

        @media (max-width: 600px) {
            .exam-title { font-size: 1.5rem; }
            .time-unit { min-width: 60px; padding: 10px; }
            .time-value { font-size: 1.5rem; }
            .q-header { font-size: 0.95rem; }
        }
    </style>
</head>
<body>

    <header>
        <h1 class="exam-title">الموسوعة الشاملة: القانون المدني</h1>
        <div class="exam-subtitle">مصادر الالتزام | ملخص شامل لكل شاردة وواردة</div>
        
        <div class="countdown-wrapper" id="countdown">
            </div>
        <div style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8;">موعد الامتحان: 11-01-2026 الساعة 10:00 صباحاً</div>
    </header>

    <div class="main-container">
        <input type="text" class="search-box" id="searchInput" placeholder="ابحث عن أي معلومة (مثلاً: الغلط، القاصر، التقادم)...">

        <div class="tabs" id="tabsContainer">
            <button class="tab-btn active" data-cat="all">الكل</button>
            <button class="tab-btn" data-cat="intro">المصادر والتعريف</button>
            <button class="tab-btn" data-cat="consent">ركن التراضي</button>
            <button class="tab-btn" data-cat="vices">عيوب الإرادة</button>
            <button class="tab-btn" data-cat="pillars">المحل والسبب والشكل</button>
            <button class="tab-btn" data-cat="effects">آثار العقد والانحلال</button>
            <button class="tab-btn" data-cat="tort">المسؤولية التقصيرية</button>
        </div>

        <div id="questionsList">
            </div>
    </div>

    <script>
        // 1. قاعدة البيانات الشاملة (كل شاردة وواردة من الملف)
        const db = [
            // ================== مقدمة ومصادر ==================
            { cat: 'intro', type: 'direct', q: 'ما هي مصادر الالتزام الخمسة التي حددها القانون المدني؟', a: 'هي: 1. العقد، 2. الإرادة المنفردة، 3. المسؤولية التقصيرية (العمل المستحق للتعويض)، 4. الإثراء بلا سبب، 5. القانون.', ref: 'صفحة 1 [مصدر: 5]' },
            { cat: 'intro', type: 'tf', q: 'العقد هو المصدر الوحيد للالتزام في القانون الجزائري.', a: 'خطأ. العقد هو المصدر الأول والغالب، لكنه ليس الوحيد، توجد 4 مصادر أخرى ذكرت في المواد من 53 إلى 159.', ref: 'صفحة 1 [مصدر: 5]' },

            // ================== ركن التراضي ==================
            { cat: 'consent', type: 'direct', q: 'ما هو تعريف الإيجاب وشروطه الثلاثة؟', a: 'الإيجاب هو تعبير جازم عن الإرادة يتضمن عرضاً للتعاقد. شروطه: 1. أن يكون جازماً وباتاً، 2. أن يكون محدداً وكاملاً (يتضمن العناصر الأساسية)، 3. أن يوجه إلى الغير (شخص معين أو الجمهور).', ref: 'صفحة 1-2 [مصدر: 17-21]' },
            { cat: 'consent', type: 'tf', q: 'إذا عرض تاجر بضاعة دون تحديد سعرها، يعتبر ذلك إيجاباً.', a: 'خطأ. هذا يعتبر مجرد "دعوة للتعاقد" وليس إيجاباً، لأن الإيجاب يجب أن يكون مشتملاً على العناصر الجوهرية للعقد (كالسمعة والسعر).', ref: 'صفحة 2 [مصدر: 22]' },
            { cat: 'consent', type: 'tf', q: 'يسقط الإيجاب الملزم إذا انقضت المدة المحددة دون قبول.', a: 'صحيح. يسقط الإيجاب بانتهاء المدة، أو بوفاة الموجب قبل اتصال الإيجاب بعلم القابل، أو برفض من وجه إليه.', ref: 'صفحة 2 [مصدر: 31]' },
            { cat: 'consent', type: 'direct', q: 'متى يعتبر "السكوت" قبولاً (السكوت الملابس)؟', a: 'الأصل أن السكوت رفض، ولكن يعتبر قبولاً استثناءً في 3 حالات (المادة 68): 1. وجود تعامل سابق، 2. إذا كانت طبيعة المعاملة أو العرف التجاري تدل على ذلك، 3. إذا كان الإيجاب لمصلحة من وجه إليه (محض منفعة).', ref: 'صفحة 4 [مصدر: 55-59]' },
            { cat: 'consent', type: 'tf', q: 'في عقود المزايدة، يعتبر افتتاح المزاد إيجاباً.', a: 'خطأ. افتتاح المزاد هو "دعوة للتعاقد". الإيجاب هو "العطاء" الذي يتقدم به المزايد، والقبول هو "إرساء المزاد". ويسقط العطاء بعطاء أعلى منه.', ref: 'صفحة 4 [مصدر: 70]' },
            { cat: 'consent', type: 'direct', q: 'ما حكم التعاقد بين غائبين (المراسلة) في القانون الجزائري؟', a: 'أخذ المشرع بنظرية "العلم بالقبول". العقد ينعقد في الزمان والمكان اللذين يعلم فيهما الموجب بالقبول (المادة 67). ويفترض العلم لحظة وصول القبول.', ref: 'صفحة 5 [مصدر: 82]' },
            { cat: 'consent', type: 'tf', q: 'في الوعد بالتعاقد، إذا نكل الواعد عن وعده، يمكن للموعود له إجباره.', a: 'صحيح. إذا نكل الواعد، يجوز للموعود له مقاضاته، ويقوم الحكم القضائي مقام العقد النهائي (المادة 72).', ref: 'صفحة 6 [مصدر: 100]' },
            { cat: 'consent', type: 'direct', q: 'ما هي دلالة "العربون" في القانون الجزائري (المادة 72 مكرر)؟', a: 'دلالة العربون هي "الحق في العدول" إلا إذا اتفق الطرفان على خلاف ذلك. فإذا عدل الدافع فقد العربون، وإذا عدل القابض رده ومثله.', ref: 'صفحة 6 [مصدر: 108]' },
            { cat: 'consent', type: 'tf', q: 'يجوز للنائب أن يتعاقد مع نفسه لحساب الأصيل.', a: 'خطأ كأصل عام (تضارب مصالح). ولكن يجوز استثناءً في حالتين: 1. ترخيص مسبق من الأصيل، 2. إجازة لاحقة من الأصيل، أو نص القانون.', ref: 'صفحة 8 [مصدر: 142]' },

            // ================== صحة التراضي (الأهلية والعيوب) ==================
            { cat: 'vices', type: 'direct', q: 'ما هي مراحل الأهلية الثلاث وتأثيرها على العقد؟', a: '1. عديم التمييز (0-13 سنة): تصرفاته باطلة بطلاناً مطلقاً. <br>2. المميز (13-19 سنة): تصرفاته قابلة للإبطال (صحيحة في النافع نفعاً محضاً، باطلة في الضار، قابلة للإبطال في الدائر بين النفع والضرر). <br>3. الرشيد (19 سنة): تصرفاته صحيحة.', ref: 'صفحة 8 [مصدر: 152]' },
            { cat: 'vices', type: 'tf', q: 'المجنون والمعتوه يأخذان حكم الصبي المميز.', a: 'خطأ. المجنون والمعتوه يأخذان حكم "عديم التمييز" (تصرفات باطلة). أما السفيه وذو الغفلة فيأخذان حكم "الصبي المميز" (قابلة للإبطال).', ref: 'صفحة 9 [مصدر: 156-159]' },
            { cat: 'vices', type: 'direct', q: 'متى يكون الغلط سبباً لإبطال العقد؟', a: 'إذا كان الغلط "جوهرياً" (دافعاً للتعاقد) واتصل بعلم المتعاقد الآخر (المادة 81-82). الغلط الجوهري يقع في صفة الشيء أو شخص المتعاقد.', ref: 'صفحة 10 [مصدر: 171]' },
            { cat: 'vices', type: 'tf', q: 'السكوت يعتبر تدليساً دائماً.', a: 'خطأ. السكوت المجرد ليس تدليساً. يعتبر تدليساً فقط إذا كان "كتماً متعمداً" لواقعة جوهرية لو علم بها الطرف الآخر لما تعاقد (واجب الإفضاء).', ref: 'صفحة 11 [مصدر: 197]' },
            { cat: 'vices', type: 'direct', q: 'ما الفرق بين الإكراه المادي والإكراه المعنوي؟', a: 'الإكراه المادي يعدم الإرادة (لا عقد أصلاً). الإكراه المعنوي (التهديد) يعيب الإرادة ويجعل العقد قابلاً للإبطال.', ref: 'صفحة 12 [مصدر: 212]' },
            { cat: 'vices', type: 'tf', q: 'يسقط حق طلب الإبطال بسبب الاستغلال بعد 10 سنوات.', a: 'خطأ. تسقط دعوى الاستغلال بعد سنة واحدة فقط من تاريخ إبرام العقد (المادة 90).', ref: 'صفحة 20 [مصدر: 357]' },

            // ================== المحل والسبب والشكل ==================
            { cat: 'pillars', type: 'tf', q: 'يجوز التعامل في تركة إنسان حي إذا كان برضاه.', a: 'خطأ. لا يجوز التعامل في التركات المستقبلية مطلقاً ولو برضا صاحبها (المادة 92). العقد باطل بطلاناً مطلقاً.', ref: 'صفحة 14 [مصدر: 249]' },
            { cat: 'pillars', type: 'direct', q: 'ما حكم العقد إذا كان محله مستحيلاً استحالة مطلقة؟', a: 'العقد باطل بطلاناً مطلقاً. أما إذا كانت الاستحالة نسبية (مستحيل على المدين فقط وممكن لغيره) فالعقد صحيح والمدين ملزم بالتعويض.', ref: 'صفحة 14 [مصدر: 250-252]' },
            { cat: 'pillars', type: 'tf', q: 'يفترض القانون أن لكل التزام سبباً مشروعاً حتى يقوم الدليل على العكس.', a: 'صحيح. المادة 98 تضع قرينة قانونية بسيطة على وجود السبب ومشروعيته.', ref: 'صفحة 15 [مصدر: 265]' },
            { cat: 'pillars', type: 'direct', q: 'ما الفرق بين الشكلية كركن والشكلية للإثبات؟', a: 'الشكلية كركن (مثل عقد بيع العقار): تخلفها يؤدي للبطلان المطلق. الشكلية للإثبات (مثل الكفالة): تخلفها لا يبطل العقد بل يجعل إثباته صعباً (يمنع إثباته بالشهود).', ref: 'صفحة 16 [مصدر: 286]' },

            // ================== البطلان والآثار ==================
            { cat: 'effects', type: 'direct', q: 'قارن بين البطلان المطلق والنسبي من حيث التقادم.', a: 'البطلان المطلق: تسقط الدعوى بـ 15 سنة. <br>البطلان النسبي: تسقط الدعوى بـ 5 سنوات من زوال العيب (أو 10 سنوات من تاريخ العقد كحد أقصى).', ref: 'صفحة 18-20 [مصدر: 321, 353]' },
            { cat: 'effects', type: 'tf', q: 'يجوز للقاضي تعديل العقد في حالة الظروف الطارئة.', a: 'صحيح. إذا طرأت حوادث استثنائية عامة تجعل التنفيذ مرهقاً، يجوز للقاضي رد الالتزام للحد المعقول (نظرية الظروف الطارئة المادة 107/3).', ref: 'صفحة 23 [مصدر: 421]' },
            { cat: 'effects', type: 'direct', q: 'ما هي شروط الفسخ القضائي؟', a: '1. عقد ملزم للجانبين. 2. إخلال أحد الطرفين بالتزامه. 3. إعذار المدين. 4. أن يكون طالب الفسخ قد نفذ التزامه وقادر على إعادة الحال.', ref: 'صفحة 24 [مصدر: 453]' },
            { cat: 'effects', type: 'tf', q: 'في الفسخ الاتفاقي، يملك القاضي سلطة تقديرية لمنح مهلة.', a: 'خطأ. في الفسخ الاتفاقي (المادة 120)، دور القاضي يقتصر على التحقق من الشرط والحكم بالفسخ حتماً، ولا يملك منح نظرة ميسرة.', ref: 'صفحة 25 [مصدر: 472]' },
            
            // ================== المسؤولية التقصيرية ==================
            { cat: 'tort', type: 'direct', q: 'ما هي أركان المسؤولية عن العمل الشخصي؟', a: '1. الخطأ (التعدي + الإدراك). <br>2. الضرر (مادي أو معنوي). <br>3. العلاقة السببية بينهما.', ref: 'صفحة 29 [مصدر: 529]' },
            { cat: 'tort', type: 'tf', q: 'سن التمييز للمسؤولية التقصيرية هو 19 سنة.', a: 'خطأ. سن التمييز للمسؤولية التقصيرية (الإدراك) هو 13 سنة (المادة 125).', ref: 'صفحة 29 [مصدر: 537]' },
            { cat: 'tort', type: 'direct', q: 'متى تنتفي المسؤولية التقصيرية (نفي علاقة السببية)؟', a: 'تنتفي بإثبات "السبب الأجنبي": القوة القاهرة، الحادث المفاجئ، خطأ المضرور، أو خطأ الغير (المادة 127).', ref: 'صفحة 34 [مصدر: 616]' },
            { cat: 'tort', type: 'direct', q: 'على أي أساس تقوم مسؤولية متولي الرقابة (الأب مثلاً)؟', a: 'تقوم على أساس "خطأ مفترض" (افتراض التقصير في الرقابة). يمكن نفيه بإثبات القيام بواجب الرقابة أو أن الضرر كان سيقع حتماً.', ref: 'صفحة 37 [مصدر: 664]' },
            { cat: 'tort', type: 'tf', q: 'مسؤولية المتبوع عن أعمال تابعه تتطلب خطأً مفترضاً من المتبوع.', a: 'خطأ. مسؤولية المتبوع هي مسؤولية "بدون خطأ" (بقوة القانون/تبعية). لا يمكن دفعها بإثبات عدم التقصير، بل فقط بنفي السببية.', ref: 'صفحة 39 [مصدر: 699]' },
            { cat: 'tort', type: 'direct', q: 'هل يحق للمتبوع الرجوع على تابعه بما دفعه من تعويض؟', a: 'نعم، ولكن بشرط أن يكون التابع قد ارتكب "خطأ جسيماً" (المادة 137 بعد التعديل).', ref: 'صفحة 40 [مصدر: 708]' },
            { cat: 'tort', type: 'tf', q: 'التعسف في استعمال الحق يعتبر صورة من صور الخطأ.', a: 'صحيح (المادة 124 مكرر). ويكون في حالات: قصد الإضرار، المصلحة القليلة جداً مقارنة بالضرر، أو المصلحة غير المشروعة.', ref: 'صفحة 31 [مصدر: 569]' }
        ];

        // 2. وظائف التشغيل
        function renderQuestions(filterCat = 'all', searchTerm = '') {
            const container = document.getElementById('questionsList');
            container.innerHTML = '';

            let filtered = db.filter(item => {
                const matchCat = filterCat === 'all' || item.cat === filterCat;
                const matchSearch = item.q.includes(searchTerm) || item.a.includes(searchTerm);
                return matchCat && matchSearch;
            });

            if (filtered.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:40px; color:#64748b;">لا توجد نتائج مطابقة لبحثك.</div>';
                return;
            }

            filtered.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'q-card';
                
                const badgeClass = item.type === 'tf' ? 'badge-tf' : 'badge-direct';
                const badgeText = item.type === 'tf' ? 'صح/خطأ' : 'سؤال مباشر';
                
                card.innerHTML = `
                    <div class="q-header" onclick="toggleCard(this)">
                        <div>
                            <span class="q-badge ${badgeClass}">${badgeText}</span>
                            ${highlightText(item.q, searchTerm)}
                        </div>
                        <svg class="icon" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="q-body">
                        <div class="q-content">
                            <div>${highlightText(item.a, searchTerm)}</div>
                            <span class="ref-tag">المصدر: ${item.ref}</span>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function toggleCard(element) {
            element.parentElement.classList.toggle('open');
        }

        function highlightText(text, term) {
            if (!term) return text;
            const re = new RegExp(`(${term})`, 'gi');
            return text.replace(re, '<span class="highlight">$1</span>');
        }

        // 3. العداد التنازلي
        function startCountdown() {
            const examDate = new Date('2026-01-11T10:00:00').getTime();
            
            setInterval(() => {
                const now = new Date().getTime();
                const distance = examDate - now;

                if (distance < 0) {
                    document.getElementById('countdown').innerHTML = '<div style="color:white; font-size:1.5rem;">حان وقت الامتحان!</div>';
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('countdown').innerHTML = `
                    <div class="time-unit"><span class="time-value">${days}</span><span class="time-label">يوم</span></div>
                    <div class="time-unit"><span class="time-value">${hours}</span><span class="time-label">ساعة</span></div>
                    <div class="time-unit"><span class="time-value">${minutes}</span><span class="time-label">دقيقة</span></div>
                    <div class="time-unit"><span class="time-value">${seconds}</span><span class="time-label">ثانية</span></div>
                `;
            }, 1000);
        }

        // 4. تهيئة الأحداث
        document.addEventListener('DOMContentLoaded', () => {
            renderQuestions();
            startCountdown();

            // فلترة التبويبات
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    const cat = e.target.getAttribute('data-cat');
                    const term = document.getElementById('searchInput').value;
                    renderQuestions(cat, term);
                });
            });

            // البحث المباشر
            document.getElementById('searchInput').addEventListener('input', (e) => {
                const term = e.target.value;
                const activeCat = document.querySelector('.tab-btn.active').getAttribute('data-cat');
                renderQuestions(activeCat, term);
            });
        });
    </script>
</body>
</html>
